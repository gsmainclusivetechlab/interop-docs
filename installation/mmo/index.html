<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<title data-react-helmet="true">Mobile Money Operator Installation Guide | GSMA Interoperability Test Platform Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Mobile Money Operator Installation Guide | GSMA Interoperability Test Platform Documentation"><meta data-react-helmet="true" name="description" content="The GSMA Interoperability Test Platform currently supports simulation of mobile"><meta data-react-helmet="true" property="og:description" content="The GSMA Interoperability Test Platform currently supports simulation of mobile"><meta data-react-helmet="true" property="og:url" content="https://docs.interop.gsmainclusivetechlab.io/installation/mmo"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.interop.gsmainclusivetechlab.io/installation/mmo"><link rel="stylesheet" href="/styles.603197e6.css">
<link rel="preload" href="/styles.cb03cbe7.js" as="script">
<link rel="preload" href="/runtime~main.ee1e5d09.js" as="script">
<link rel="preload" href="/main.e2dd171c.js" as="script">
<link rel="preload" href="/1.aa5867b4.js" as="script">
<link rel="preload" href="/2.6635064b.js" as="script">
<link rel="preload" href="/4.29695a38.js" as="script">
<link rel="preload" href="/1be78505.25b5155b.js" as="script">
<link rel="preload" href="/ec1ed54d.d5e9bdfa.js" as="script">
<link rel="preload" href="/3.3a522dce.js" as="script">
<link rel="preload" href="/e9ce6a22.a6d8dc70.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/home">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docsguide">Documentation Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/connections">Component Connections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/matching">Test Case Matching</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/introduction">Installation Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/itp">Interoperability Test Platform</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/installation/mmo">Mobile Money Operator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/sp">Service Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/mojaloop">Mojaloop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/usecases/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/usecases/list">List of Use Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/usecases/creation">Creating a Use Case</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Test Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/list">List of Test Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/creation">Creating a Test Case</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Manual</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/quickguide">Quick Guide for Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/session">Test Sessions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/postman-sut">Testing without a SUT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/results">Test Results</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Mobile Money Operator Installation Guide</h1></header><div class="markdown"><p>The GSMA Interoperability Test Platform currently supports simulation of mobile
money operators (MMO) in two configurations. In the first configuration, the MMO
can communicate with a service provider via the
<a href="https://developer.mobilemoneyapi.io/">GSMA Mobile Money API</a> and with an
interoperability hub using the Mojaloop API (MMO1 in the diagram below). In the
second configuration, the MMO will communicate exclusively with the Mojaloop API
(MMO2 in the diagram below).</p><div id="graphviz5"></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mmo1-simulator-set-up"></a>MMO1 Simulator Set-up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mmo1-simulator-set-up" title="Direct link to heading">#</a></h2><p>To begin with, download the code for the simulator onto your machine. To do this
using git, run:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone git@github.com:gsmainclusivetechlab/interop-mm-simulator.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> interop-mm-simulator</span></div></div></div></div></div><p>Certain configuration files must be created to customise the simulator to your
own environment. To get you started, you can copy the <code>*.example</code> files included
in the codebase. Alternatively, you can run the <code>make init</code> command if you have
<code>make</code> installed on your machine. The files to copy are:</p><ul><li><code>.env</code>: In this file, you can configure the ports that the simulator should
listen for connections on, as well as defining credentials for the MySQL
database.</li><li><code>src/.env</code>: In this file, you can configure the URL for the test platform, as
well as the URLs that the platform will use to contact other simulator
components.</li><li><code>docker-compose.yml</code>: No changes should be required for development.</li></ul><p>Once the configuration files have been added, you should be able to launch all
services using the following command:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose up -d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creating network &quot;mm-simulator_default&quot; with the default driver</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creating mm-simulator_mysqldb_1 ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creating mm-simulator_app_1     ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creating mm-simulator_web_1     ... done</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="database-installation"></a>Database Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#database-installation" title="Direct link to heading">#</a></h3><p>At this point, <code>docker-compose</code> has launched all services required for the
simulator, but they still require further set-up. You can now set up the
database and install any missing dependencies by simply running <code>make install</code>:</p><blockquote><p>In a future version of the MMO1 simulator, the images used by Docker will be
pre-configured, so this step will not be necessary.</p></blockquote><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker-compose exec app bash -c &quot;make install&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Chmod storage and bootstrap cache...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Install composer...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># make[1]: Leaving directory &#x27;~/Code/GSMA/interop-mm-simulator&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># touch runtime/installed</span></div></div></div></div></div><p>The simulator should now be accessible at <code>http://localhost:8084</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="url-configuration"></a>URL Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#url-configuration" title="Direct link to heading">#</a></h3><p>In order for the simulator to communicate with other components, you must add
the URLs for these components into the <code>src/.env</code> file. In particular, you will
need to add URLs pointing to the service provider and the Mojaloop hub. In our
particular case, we must use URLs for the core test platform, which will
redirect requests to the appropriate component. All simulators must be
configured with URLs that follow a consistent structure:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://{itp_url}/testing/{my_uuid}/{recipient_uuid}/simulator/</span></div></div></div></div></div><ul><li>Within MMO1, <code>my_uuid</code> should always be equal to
<code>e5f5e817-94d6-4a43-a7ec-f7274b6d85c2</code></li><li>For the service provider, set
<code>recipient_uuid=114511be-74e9-49d5-b93e-b4a461e01626</code>.</li><li>For the Mojaloop hub, set
<code>recipient_uuid=b2a85076-b748-4d93-8df1-2b39844e6d4b</code>.</li></ul><p>The Mojaloop hub URL must be updated in several places within <code>src/.env</code>. In the
end, the file should look something like this:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-ini codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Service Provider URL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_SERVICE_PROVIDER=https://{itp_url}/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/114511be-74e9-49d5-b93e-b4a461e01626/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Mojaloop URLs - all identical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_ACCOUNT_LOOKUP_ADMIN=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_ACCOUNT_LOOKUP_SERVICE=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_CENTRAL_LEDGER=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_CENTRAL_SETTLEMENT=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_SIMULATOR=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_TRANSACTION_REQUESTS_SERVICE=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_ML_API_ADAPTER=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HOST_QUOTING_SERVICE=https://{itp_url}/testing/114511be-74e9-49d5-b93e-b4a461e01626/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mmo2-simulator-set-up"></a>MMO2 Simulator Set-up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mmo2-simulator-set-up" title="Direct link to heading">#</a></h2><p>To begin with, download the code for the simulator onto your machine. To do this
using git, run:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone git@github.com:gsmainclusivetechlab/interop-mojaloop-simulator.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> interop-mojaloop-simulator</span></div></div></div></div></div><p>Certain configuration files must be created to customise the simulator to your
own environment. To get started, you can copy the <code>.env.example</code> file included
in the codebase.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="url-configuration-1"></a>URL Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#url-configuration-1" title="Direct link to heading">#</a></h3><p>The simulator must be configured with the URL for the Mojaloop hub. In our case,
you will actually need to add URLs for the core test platform, which will
redirect requests to Mojaloop. All simulators must be configured with URLs that
follow a consistent structure:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://{itp_url}/testing/{my_uuid}/{recipient_uuid}/simulator/</span></div></div></div></div></div><ul><li>Within MMO2, <code>my_uuid</code> should always be equal to
<code>e602a859-a25f-4d37-9abe-0ac09fb734af</code></li><li>Within MMO2, <code>recipient_uuid</code> should always be equal to
<code>b2a85076-b748-4d93-8df1-2b39844e6d4b</code> (the Mojaloop hub).</li></ul><p>This URL must be updated in several places within <code>.env</code>. In the end, the file
should look something like this:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-ini codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Mojaloop URLs - all identical</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TRANSFERS_ENDPOINT=https://{itp_url}/testing/e602a859-a25f-4d37-9abe-0ac09fb734af/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">QUOTES_ENDPOINT=https://{itp_url}/testing/e602a859-a25f-4d37-9abe-0ac09fb734af/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TRANSACTION_REQUESTS_ENDPOINT=https://{itp_url}/testing/e602a859-a25f-4d37-9abe-0ac09fb734af/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AUTHORIZATIONS_ENDPOINT=https://{itp_url}/testing/e602a859-a25f-4d37-9abe-0ac09fb734af/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="launch"></a>Launch<a aria-hidden="true" tabindex="-1" class="hash-link" href="#launch" title="Direct link to heading">#</a></h3><p>Once this configuration file has been added, you should simply be able to launch
the simulator using the following command:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose up -d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creating Simulator ... done</span></div></div></div></div></div><p>The simulator should be accessible at <code>http://localhost:8444</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="updating-simulators"></a>Updating Simulators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#updating-simulators" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="backing-up"></a>Backing Up<a aria-hidden="true" tabindex="-1" class="hash-link" href="#backing-up" title="Direct link to heading">#</a></h3><p>Updating either simulator is very straightforward and unlikely to cause any data
loss. Before you proceed, you may nonetheless choose to make a backup of your
database with the following command (this is not necessary on MMO2, where no
database is used):</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> mysqldb </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> -c </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mysqldump -p -u </span><span class="token string variable" style="color:rgb(191, 199, 213)">$DB_USERNAME</span><span class="token string" style="color:rgb(195, 232, 141)">  </span><span class="token string variable" style="color:rgb(191, 199, 213)">$DB_DATABASE</span><span class="token string" style="color:rgb(195, 232, 141)"> &gt; /var/lib/mysql/mmo-simulator_</span><span class="token string variable" style="color:rgb(191, 199, 213)">`</span><span class="token string variable function" style="color:rgb(130, 170, 255)">date</span><span class="token string variable" style="color:rgb(191, 199, 213)"> +%Y-%m-%d</span><span class="token string variable" style="color:rgb(191, 199, 213)">`</span><span class="token string" style="color:rgb(195, 232, 141)">.sql&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Enter password...</span></div></div></div></div></div><p>This will place a <code>.sql</code> dump file inside the <code>runtime/mysql</code> directory. You may
also choose to backup any modifications you have made to configuration files or
code (including the mysql backup just made) using <code>rsync</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -auvz ./ ~/backups/</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable function" style="color:rgb(130, 170, 255)">date</span><span class="token variable" style="color:rgb(191, 199, 213)"> +%Y-%m-%d</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain">_mmo-simulator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># sending incremental file list</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># .git/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># src/vendor/webmozart/assert/src/Assert.php</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># sent 153,373,035 bytes  received 741,354 bytes  4,341,250.39 bytes/sec</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># total size is 602,736,172  speedup is 3.91</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="fetching-updates"></a>Fetching Updates<a aria-hidden="true" tabindex="-1" class="hash-link" href="#fetching-updates" title="Direct link to heading">#</a></h3><p>To update the project code, simply run pull the latest changes using git. You
can also update service images (such as those used for mysql and redis) with
<code>docker-compose</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose stop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Stopping test-platform_web_1     ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Stopping test-platform_app_1     ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Stopping test-platform_mysqldb_1 ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> pull</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Updating 59995d74..0af9196d</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose pull</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Pulling mysqldb ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Pulling app     ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Pulling web     ... done</span></div></div></div></div></div><p>Once you have obtained the latest code, the procedure differs slightly for MMO1
and MMO2.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mmo1"></a>MMO1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mmo1" title="Direct link to heading">#</a></h4><p>For MMO1, the services can immediately be restarted, and any missing
dependencies can be installed using the <code>make update</code> script:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose up -d --force-recreate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Recreating test-platform_mysqldb_1   ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Recreating test-platform_app_1       ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Recreating test-platform_web_1       ... done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker-compose exec  --privileged --index=1 -w /var/www/html app bash -c &quot;make update&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># make[1]: Leaving directory &#x27;~/Code/GSMA/interop-mm-simulator&#x27;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mmo2"></a>MMO2<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mmo2" title="Direct link to heading">#</a></h4><p>For MMO2, the simulator image must be rebuilt before restarting the services,
and there is no need to run a <code>make update</code> script:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Building simulator</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Step 1/9 : FROM node:12.16.0-alpine</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker-compose up -d --force-recreate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Recreating simulator  ... done</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="production-use"></a>Production Use<a aria-hidden="true" tabindex="-1" class="hash-link" href="#production-use" title="Direct link to heading">#</a></h2><p>To set up the simulators for production use, a few changes are recommended:</p><ul><li>The services defined in <code>docker-compose.yml</code> should be configured to restart
on failure by adding <code>restart: always</code> into the docker-compose configuration.</li><li>You may choose to add a reverse proxy (for example using
<a href="https://www.nginx.com/"><code>nginx</code></a>) to make the simulator available on other
hostnames.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gsmainclusivetechlab/interop-docs/blob/develop/docs/installation/mmo.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/installation/itp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Interoperability Test Platform Installation Guide</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/installation/sp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Service Provider Installation Guide »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mmo1-simulator-set-up" class="table-of-contents__link">MMO1 Simulator Set-up</a><ul><li><a href="#database-installation" class="table-of-contents__link">Database Installation</a></li><li><a href="#url-configuration" class="table-of-contents__link">URL Configuration</a></li></ul></li><li><a href="#mmo2-simulator-set-up" class="table-of-contents__link">MMO2 Simulator Set-up</a><ul><li><a href="#url-configuration-1" class="table-of-contents__link">URL Configuration</a></li><li><a href="#launch" class="table-of-contents__link">Launch</a></li></ul></li><li><a href="#updating-simulators" class="table-of-contents__link">Updating Simulators</a><ul><li><a href="#backing-up" class="table-of-contents__link">Backing Up</a></li><li><a href="#fetching-updates" class="table-of-contents__link">Fetching Updates</a></li></ul></li><li><a href="#production-use" class="table-of-contents__link">Production Use</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 GSMA . All rights reserved.</div></div></div></footer></div>
<script src="/styles.cb03cbe7.js"></script>
<script src="/runtime~main.ee1e5d09.js"></script>
<script src="/main.e2dd171c.js"></script>
<script src="/1.aa5867b4.js"></script>
<script src="/2.6635064b.js"></script>
<script src="/4.29695a38.js"></script>
<script src="/1be78505.25b5155b.js"></script>
<script src="/ec1ed54d.d5e9bdfa.js"></script>
<script src="/3.3a522dce.js"></script>
<script src="/e9ce6a22.a6d8dc70.js"></script>
</body>
</html>