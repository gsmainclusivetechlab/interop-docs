(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{172:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return r})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return l}));var a=n(2),o=n(9),i=(n(0),n(184)),s={id:"howtestswork",title:"How Tests Work with Components",sidebar_label:"How Tests Work"},r={id:"howtestswork",title:"How Tests Work with Components",description:"This manual describes how the Test Control, Mojaloop and Simulators should be set up in order to work properly per working environment (e.g. Staging or Production) and contains examples of setups.",source:"@site/docs/howtestswork.md",permalink:"/howtestswork",editUrl:"https://github.com/gsmainclusivetechlab/interop-docs/docs/howtestswork.md",sidebar_label:"How Tests Work",sidebar:"someSidebar",previous:{title:"ITP Architecture",permalink:"/architecture"},next:{title:"Interoperability Test Platform Installation Guide",permalink:"/installitp"}},b=[{value:"Components",id:"components",children:[]},{value:"Connections between Components",id:"connections-between-components",children:[]},{value:"Component identifiers",id:"component-identifiers",children:[{value:"Simulators",id:"simulators",children:[]},{value:"SUTs",id:"suts",children:[]}]}],c={rightToc:b};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This manual describes how the Test Control, Mojaloop and Simulators should be set up in order to work properly per working environment (e.g. Staging or Production) and contains examples of setups."),Object(i.b)("h2",{id:"components"},"Components"),Object(i.b)("p",null,"The platform includes four components used to test the Use Cases different paths. They are:"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Interoperability Test Platform"),": intercepts messages between Components in order to show them on Portal side (and perform tests as well)"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"SP Simulator"),": represents Service Provider"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"MMO1 simulator"),": represents Payee\u2019s FSP"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"MMO2 simulator"),": represents Payer\u2019s FSP"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Mojaloop"),": interoperability platform that connects MMO1 and MMO2 so that they can perform Use Cases (business operations like transfer funds in between MMOs)"),Object(i.b)("h2",{id:"connections-between-components"},"Connections between Components"),Object(i.b)("p",null,"In the real world in order to perform a Use Case the Payer\u2019s MMO would connect directly to Mojaloop and ask to transfer funds to Payee\u2019s MMO. However, the ITP system has to show all messages between Components to users. This goal can be reached if ITP somehow intercept messages."),Object(i.b)("p",null,"Thus,\nITP should receive messages from Components\nComponent A need to think that it sending messages to Component B, but in the meantime, it should send message to ITP\nThe messages to be stored in ITP and send to Component-recipient"),Object(i.b)("p",null,"Possible scheme of it:\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/interop-docs/img/itpconnections.png",alt:"Component Scheme"}))),Object(i.b)("h2",{id:"component-identifiers"},"Component identifiers"),Object(i.b)("p",null,"Apart from Test Case triggers and other options to identify the received message, the Test Control should somehow easily identify a sender and a recipient of the message. For this reason each component has its own uuid.\nThey are:"),Object(i.b)("p",null,"SP: 114511be-74e9-49d5-b93e-b4a461e01626"),Object(i.b)("p",null,"MMO1: e5f5e817-94d6-4a43-a7ec-f7274b6d85c2"),Object(i.b)("p",null,"Mojaloop: b2a85076-b748-4d93-8df1-2b39844e6d4b"),Object(i.b)("p",null,"MMO2: e602a859-a25f-4d37-9abe-0ac09fb734af"),Object(i.b)("p",null,"On having identifiers per component, the next stage for the Test Control is to define by uuids the sender and recipient of the message. Thus we should force simulators and SUTs to send uuids to Test Control. This is being done via URLs, that simulators and SUTs have inside, e.g. MMO1 communicates with SP and Mojaloo, so it should have inside URLs of both of them."),Object(i.b)("p",null,"URL building specifics are a bit different for simulators and SUTs, so they will be described separately."),Object(i.b)("h3",{id:"simulators"},"Simulators"),Object(i.b)("p",null,"The simulators use traceparent as a unique id of the Test Run, so Test Control can easily identify the run, however, uuids + method (e.g. POST) + endpoint (e.g. /quotes) should help him to quickly find the step of the Test Case, rather than checking all steps one-by-one. For these reason URLs inside each simulator have the next structure:"),Object(i.b)("p",null,"http://{itp_url}/testing/{my_uuid}/{recipient_uuid}/simulator, where"),Object(i.b)("p",null,"{itp_url} is a URL of ITP,",Object(i.b)("br",{parentName:"p"}),"\n","e.g. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io"}),"http://interop.gsmainclusivetechlab.io"),"\ntesting is an identification for Test Control that this URL is related to Test Cases flow\n{my_uuid} is uuid of this simulator\ne.g. for MMO1 e5f5e817-94d6-4a43-a7ec-f7274b6d85c2\n{recipient_uuid} is a uuid of simulator that I send a message to\ne.g. for Mojaloop b2a85076-b748-4d93-8df1-2b39844e6d4b\nsimulator is an identification for Test Control that this URL is related Simulator, so it includes a traceparent and its messages can be overridden"),Object(i.b)("p",null,"Thus, the URL of messages that MMO1 simulator will send to Mojaloop (through Test Control) on Production server will be:"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/simulator"}),"http://interop.gsmainclusivetechlab.io/testing/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/simulator")),Object(i.b)("h3",{id:"suts"},"SUTs"),Object(i.b)("p",null,"The SUTs may not support traceparent, so an additional layer of identification was created. They have a unique URLs for the nearest Components per Session + Test Control perform matching by triggers (test data, like \u201cfor Test Case #1 the amount field should be equal to \u2018100\u2019\u201d)."),Object(i.b)("p",null,"The URL structure for SUTs a bit differs from the simulators' one:"),Object(i.b)("p",null,"http://{itp_url}/testing/{session_uuid}/{my_uuid}/{recipient_uuid}/sut, where"),Object(i.b)("p",null,"{itp_url} is a URL of ITP,",Object(i.b)("br",{parentName:"p"}),"\n","e.g. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io"}),"http://interop.gsmainclusivetechlab.io"),"\ntesting is an identification for Test Control that this URL is related to Test Cases flow\n{session_id} the uuid of the session, generated by Test Control\ne.g. 41a2e8d5-3ce4-459b-a6eb-1a1e2988c357\n{my_uuid} is uuid of this simulator\ne.g. for MMO1 e5f5e817-94d6-4a43-a7ec-f7274b6d85c2\n{recipient_uuid} is a uuid of simulator that I send a message to\ne.g. for Mojaloop b2a85076-b748-4d93-8df1-2b39844e6d4b\nsut is an identification for Test Control that this URL is related Simulator, so it includes a traceparent and its messages can be overridden"),Object(i.b)("p",null,"Thus, the URL of messages that MMO1 as SUT will send to Mojaloop (through Test Control) on Production server will be:"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/41a2e8d5-3ce4-459b-a6eb-1a1e2988c357/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/sut"}),"http://interop.gsmainclusivetechlab.io/testing/41a2e8d5-3ce4-459b-a6eb-1a1e2988c357/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/sut")),Object(i.b)("p",null,"1.3.4) Mojaloop specifics\nMojaloop should also send messages to Test Control, instead of sending them to simulators/SUTs. This is being managed via FSP callbacks inside Mojaloop. More about the initial callbacks setup you can find here. There are 2 FSPs (for MMO1 and MMO2) that need to be setup per environment (e.g. Production or Staging)."),Object(i.b)("p",null,"The URL structure for callbacks is a very similar to simulators\u2019 one:"),Object(i.b)("p",null,"http://{itp_url}/testing/{mojaloop_uuid}/{recipient_uuid}/simulator/{path}, where"),Object(i.b)("p",null,"{itp_url} is a URL of ITP,",Object(i.b)("br",{parentName:"p"}),"\n","e.g. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io"}),"http://interop.gsmainclusivetechlab.io"),"\ntesting is an identification for Test Control that this URL is related to Test Cases flow\n{mojaloop_uuid} is uuid of this simulator\ne.g. b2a85076-b748-4d93-8df1-2b39844e6d4b\n{recipient_uuid} is a uuid of simulator that I send a message to\ne.g. for MMO1 e5f5e817-94d6-4a43-a7ec-f7274b6d85c2\nsimulator is an identification for Test Control that this URL is related Simulator, so it includes a traceparent and its messages can be overridden\n{path} the pass that is necessary to execute exact callback"),Object(i.b)("p",null,"Below you can find some examples of callbacks in Mojaloop that were set for MMO1: "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_TRX_REQ_SERVICE\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator")),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_QUOTES\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator")),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_TRANSFER_POST\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers"),"  "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_TRANSFER_PUT\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/%7B%7BtransferId%7D%7D"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/{{transferId}}"),"  "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_TRANSFER_ERROR\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/%7B%7BtransferId%7D%7D/error"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/{{transferId}}/error"),"  "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_AUTHORIZATIONS\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator"),"  "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_PARTICIPANT_PUT\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/%7B%7BpartyIdType%7D%7D/%7B%7BpartyIdentifier%7D%7D"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/{{partyIdType}}/{{partyIdentifier}}")," "),Object(i.b)("p",null,"FSPIOP_CALLBACK_URL_PARTICIPANT_PUT_ERROR\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/%7B%7BpartyIdType%7D%7D/%7B%7BpartyIdentifier%7D%7D/error"}),"http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/{{partyIdType}}/{{partyIdentifier}}/error")," "))}l.isMDXComponent=!0},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),l=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r({},t,{},e)),n},d=function(e){var t=l(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),d=l(n),u=a,f=d["".concat(s,".").concat(u)]||d[u]||p[u]||i;return n?o.a.createElement(f,r({ref:t},c,{components:n})):o.a.createElement(f,r({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=u;var r={};for(var b in t)hasOwnProperty.call(t,b)&&(r[b]=t[b]);r.originalType=e,r.mdxType="string"==typeof e?e:a,s[1]=r;for(var c=2;c<i;c++)s[c]=n[c];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);