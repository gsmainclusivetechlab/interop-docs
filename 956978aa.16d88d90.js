(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{66:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return a})),r.d(t,"metadata",(function(){return s})),r.d(t,"rightToc",(function(){return c})),r.d(t,"default",(function(){return p}));var n=r(2),o=r(6),i=(r(0),r(80)),a={title:"Writing New Code"},s={unversionedId:"contributors-guide/new-code",id:"contributors-guide/new-code",isDocsHomePage:!1,title:"Writing New Code",description:"To ensure that your contributions are merged in effectively, and that no one is",source:"@site/docs/contributors-guide/new-code.md",slug:"/contributors-guide/new-code",permalink:"/contributors-guide/new-code",editUrl:"https://github.com/gsmainclusivetechlab/interop-docs/blob/develop/docs/contributors-guide/new-code.md",version:"current",sidebar:"someSidebar",previous:{title:"Development Tools",permalink:"/contributors-guide/tools"},next:{title:"Reporting bugs",permalink:"/contributors-guide/bugs"}},c=[{value:"1. Fork",id:"1-fork",children:[]},{value:"Creating a Branch",id:"creating-a-branch",children:[]},{value:"Prepare for Merging",id:"prepare-for-merging",children:[]},{value:"Code Style",id:"code-style",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Git History",id:"git-history",children:[]},{value:"Merge into Upstream Repository",id:"merge-into-upstream-repository",children:[]}],l={rightToc:c};function p(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"To ensure that your contributions are merged in effectively, and that no one is\nduplicating efforts working on the same issue, please follow the steps below\nwhen you would like to write new code for the ITP."),Object(i.b)("h3",{id:"1-fork"},"1. Fork"),Object(i.b)("p",null,Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://help.github.com/articles/fork-a-repo/"}),"Fork")," the relevant repository\ninto your own personal space. It's worth ensuring that you keep the ",Object(i.b)("inlineCode",{parentName:"p"},"master")," and\n",Object(i.b)("inlineCode",{parentName:"p"},"develop")," branches in sync so that you don't miss out on upstream changes while\nyou're working."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},'Click the "Fork" button on the top right of the Github repository page')),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Clone your forked repository onto your development machine:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/<your_username>/interop-test-platform.git\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add a new upstream remote to pull in later updates"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git remote add upstream https://github.com/gsmainclusivetechlab/interop-test-platform.git\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"To sync to your current copy of ",Object(i.b)("inlineCode",{parentName:"p"},"develop"),", run"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git pull upstream develop\n")),Object(i.b)("p",{parentName:"li"},"This will merge any changes from our repository into your forked one. You can\ndo the same for the ",Object(i.b)("inlineCode",{parentName:"p"},"master")," branch.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Push your code changes back to your own repository:\n",Object(i.b)("inlineCode",{parentName:"p"},"git push origin <current_branch>")))),Object(i.b)("h3",{id:"creating-a-branch"},"Creating a Branch"),Object(i.b)("p",null,"Create a new branch from the ",Object(i.b)("inlineCode",{parentName:"p"},"develop")," branch like so:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create and checkout the branch:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git checkout develop\ngit checkout -b feature/<issueNumber><issueDescription>\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Push the branch to your remote:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"git push origin feature/<issueNumber><issueDescription>\n")))),Object(i.b)("p",null,"Instead of ",Object(i.b)("inlineCode",{parentName:"p"},"feature")," you may use other branch types, such as ",Object(i.b)("inlineCode",{parentName:"p"},"bugfix")," or\n",Object(i.b)("inlineCode",{parentName:"p"},"release"),". The issue number refers to the issue in Github. If there is no\ncorresponding issue yet, please create one before starting work! The issue\ndescription is optional, but is very useful to recognise the right branch on\nyour computer!"),Object(i.b)("h3",{id:"prepare-for-merging"},"Prepare for Merging"),Object(i.b)("p",null,"Once you have completed work on your new code, you need to make sure that the\ncode is of a high enough quality to be accepted into the main project. There are\ntwo easy ways to ensure this - check code style with ",Object(i.b)("inlineCode",{parentName:"p"},"prettier")," and test code\nquality with unit tests."),Object(i.b)("h3",{id:"code-style"},"Code Style"),Object(i.b)("p",null,"Code style across all repositories is simply enforced using\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://prettier.io/"}),Object(i.b)("inlineCode",{parentName:"a"},"prettier")),". To detect and fix any styling errors, run\n",Object(i.b)("inlineCode",{parentName:"p"},"npx prettier . --write"),". In most (but not yet all) of the project repositories,\na ",Object(i.b)("inlineCode",{parentName:"p"},".prettierrc")," file has been set up to ensure that the correct code style is\napplied (adding this ",Object(i.b)("inlineCode",{parentName:"p"},".prettierrc")," file across other projects would be a\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/orgs/gsmainclusivetechlab/projects/1?card_filter_query=label%3A%22good+first+issue%22"}),"good first issue"),"!).\nSimilarly, a top-level ",Object(i.b)("inlineCode",{parentName:"p"},"package.json")," file has been added to most project\nrepositories, allowing you to lint all project files by simply running\n",Object(i.b)("inlineCode",{parentName:"p"},"yarn lint"),"."),Object(i.b)("h3",{id:"testing"},"Testing"),Object(i.b)("p",null,"Our different projects use different technologies, and therefore are tested in\ndifferent ways. All are set up with some kind of test suite, however. If you are\nadding new functionality, please add some tests to demonstrate that the\nfunctionality is working as intended. If you are fixing a bug, please add a test\nwhich fails when the bug is present, and passes when your fix is applied."),Object(i.b)("p",null,"All projects will run the test suite automatically as part of the continuous\nintegration process which is triggered when a pull request is created. If the\ntest suite does not pass, the pull request will not be accepted."),Object(i.b)("h3",{id:"git-history"},"Git History"),Object(i.b)("p",null,"It is very useful for the project to ensure a clean commit history. This allows\nfuture developers to understand the context of every change. To ensure this, we\nwill only merge pull requests which are up-to-date with the ",Object(i.b)("inlineCode",{parentName:"p"},"develop")," branch.\nYou should also try to ensure that your pull request is focussed, and aim for\none succinct commit. For example, squash commits like ",Object(i.b)("inlineCode",{parentName:"p"},"'oops, fix typo/bug'"),"\ninto the parent commit. You can use ",Object(i.b)("inlineCode",{parentName:"p"},"git rebase -i")," to clean up the commit\nhistory before submitting the pull request."),Object(i.b)("p",null,"Include the message ",Object(i.b)("inlineCode",{parentName:"p"},"Closes gsmainclusivetechlab/<project>#123")," (replacing ",Object(i.b)("inlineCode",{parentName:"p"},"123"),"\nwith the issue number for the feature you are working on) inside your commit\nmessage so that Github links the issue and tracks progress correctly. You can do\nthe same inside the pull request description, to ensure that your work doesn't\ngo un-noticed!"),Object(i.b)("h3",{id:"merge-into-upstream-repository"},"Merge into Upstream Repository"),Object(i.b)("p",null,"Once your code has been linted and tested, you are ready to merge your code into\nthe main repository. To do this, create a pull request from your branch (on your\nforked repository) into the ",Object(i.b)("inlineCode",{parentName:"p"},"develop")," branch of the upstream repository. You can\nrequest a review from a member of the maintenance team to ensure the PR is not\nmissed. If the change is acceptable, and all code quality tests pass, then the\npull request will be merged."),Object(i.b)("p",null,'If you\'d like to preview your pull request before it\'s complete, feel free to\ncreate it early and mark it as a "draft" until you\'ve finished. It will not be\nreviewed until the "WIP" marker is removed.'))}p.isMDXComponent=!0},80:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return h}));var n=r(0),o=r.n(n);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=o.a.createContext({}),p=function(e){var t=o.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,a=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(r),d=n,h=u["".concat(a,".").concat(d)]||u[d]||b[d]||i;return r?o.a.createElement(h,s(s({ref:t},l),{},{components:r})):o.a.createElement(h,s({ref:t},l))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var l=2;l<i;l++)a[l]=r[l];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);