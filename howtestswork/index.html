<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<title data-react-helmet="true">How Tests Work with Components | GSMA Interoperability Test Platform Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="How Tests Work with Components | GSMA Interoperability Test Platform Documentation"><meta data-react-helmet="true" name="description" content="This page describes how the various components of the Interoperability Testing"><meta data-react-helmet="true" property="og:description" content="This page describes how the various components of the Interoperability Testing"><meta data-react-helmet="true" property="og:url" content="https://docs.interop.gsmainclusivetechlab.io/howtestswork"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.interop.gsmainclusivetechlab.io/howtestswork"><link rel="stylesheet" href="/styles.b89ff871.css">
<link rel="preload" href="/styles.db19ad20.js" as="script">
<link rel="preload" href="/runtime~main.5724f3fa.js" as="script">
<link rel="preload" href="/main.78b6a11b.js" as="script">
<link rel="preload" href="/1.7c136304.js" as="script">
<link rel="preload" href="/2.f8636d77.js" as="script">
<link rel="preload" href="/3.fd943062.js" as="script">
<link rel="preload" href="/1be78505.6a073ac0.js" as="script">
<link rel="preload" href="/ec1ed54d.c005814b.js" as="script">
<link rel="preload" href="/51.3ff74967.js" as="script">
<link rel="preload" href="/74f83e88.81c9408f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/quickstart">Quickstart Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docsguide">Documentation Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture">Architecture</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/howtestswork">How Tests Work</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installitp">Interoperability Test Platform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installmmo">Mobile Money Operator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installsp">Service Provider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installmoja">Mojaloop</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/usecases">Use Cases Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/uclist">Use Cases List</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/uccreation">Creating a Use Case</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Test Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tclist">Test Cases List</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tctemplate">Creating a Test Case</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Manual</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/quickguide">Quick Guide for Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/session">Test Sessions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tests">Running Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/results">Test Results</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">How Tests Work with Components</h1></header><div class="markdown"><p>This page describes how the various components of the Interoperability Testing
Platform (ITP) work together, and how they can be deployed to different
environments.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="components"></a>Components<a aria-hidden="true" tabindex="-1" class="hash-link" href="#components" title="Direct link to heading">#</a></h2><p>There are five main components used to test the paths corresponding to different
use cases. They are:</p><ul><li><strong>SP Simulator</strong>: Acts as a mock service provider (SP) such as a utilities
company or supermarket checkout to simulate their role in a transaction.</li><li><strong>MMO1 simulator</strong>: Acts as a mock financial services provider (FSP)
representing the <em>payee</em> of a transaction.</li><li><strong>MMO1 simulator</strong>: Acts as a mock financial services provider (FSP)
representing the <em>payer</em> of a transaction.</li><li><strong>Mojaloop Simulator</strong>: Acts as an interoperability platform that connects
MMO1 and MMO2 in a transaction.</li><li><strong>Interoperability Test Platform</strong>: The core test platform which intercepts
all messages between the components to display them and validate component
behaviours.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="connections-between-components"></a>Connections between Components<a aria-hidden="true" tabindex="-1" class="hash-link" href="#connections-between-components" title="Direct link to heading">#</a></h2><p>In normal operation, the payer&#x27;s MMO would connect directly to Mojaloop to
arrange a funds transfer to the payee&#x27;s MMO. In testing, however, we must
inspect every message to validate that they are correctly formed. To achieve
this, the ITP acts as a transparent proxy between all components. By configuring
endpoint URLs within component A to point at the ITP instead of directly to
component B, the ITP can store all messages and forward them onto component B.</p><div id="graphviz0"></div><div id="graphviz1"></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="component-urls"></a>Component URLs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#component-urls" title="Direct link to heading">#</a></h2><p>In order to recognise the sender and intended recipient of each message received
by the test platform, this information must be embedded within the message.
Specifically, the test platform expects that the base URL for each request will
contain a UUID corresponding to both the sender and intended recipients of the
message. Normally, the test platform will insert these UUIDs transparently so
that it is not necessary to know which component corresponds to which UUID, but
it can be helpful for debugging to know which UUID is which:</p><ul><li><strong>SP</strong>: 114511be-74e9-49d5-b93e-b4a461e01626</li><li><strong>MMO1</strong>: e5f5e817-94d6-4a43-a7ec-f7274b6d85c2</li><li><strong>Mojaloop</strong>: b2a85076-b748-4d93-8df1-2b39844e6d4b</li><li><strong>MMO2</strong>: e602a859-a25f-4d37-9abe-0ac09fb734af</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sut-urls"></a>SUT URLs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sut-urls" title="Direct link to heading">#</a></h3><p>Within a SUT, the base URL of each component should be configured according to
the following scheme:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://{itp_url}/testing/{session_uuid}/{my_uuid}/{recipient_uuid}/sut/</span></div></div></div></div></div><p>The <code>session_uuid</code> corresponds to a unique ID for each testing session, and
helps the test platform to validate incoming messages to ensure that the
expected test-cases are being correctly matched. <code>itp_url</code> is the base URL of
the test platform (e.g. <code>interop.gsmainclusivetechlab.io</code>). <code>my_uuid</code> is the
UUID of the component which is being tested, and <code>recipient_uuid</code> is the UUID of
the component to which the request will be made.</p><p>Thus, the URL that an MMO1 test subject should use to send messages to Mojaloop
(through the test platform) would be:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://interop.gsmainclusivetechlab.io/testing/41a2e8d5-3ce4-459b-a6eb-1a1e2988c357/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/sut/</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="todo-do-we-need-the-simulator-url-documentation-here"></a>TODO: Do we need the simulator URL documentation here?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#todo-do-we-need-the-simulator-url-documentation-here" title="Direct link to heading">#</a></h3><p>It feels like it&#x27;s not useful for a normal user who wouldn&#x27;t be configuring the
simulators anyway. It might be useful in a separate &quot;deployment&quot; guide.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="test-step-matching"></a>Test Step Matching<a aria-hidden="true" tabindex="-1" class="hash-link" href="#test-step-matching" title="Direct link to heading">#</a></h2><p>Using the URLs configured above, </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="simulator-urls"></a>Simulator URLs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#simulator-urls" title="Direct link to heading">#</a></h3><p>Since the simulators are within the control of the test platform, we can
slightly simplify the request URLs compared to SUTs. In particular, the
simulators use a <code>traceparent</code> header in place of the <code>session_uuid</code> from above.
For this reason base URLs used by each simulator have this structure.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://{itp_url}/testing/{my_uuid}/{recipient_uuid}/simulator/</span></div></div></div></div></div><p>Thus, the URL that an MMO1 simulator should use to send messages to Mojaloop
(through the test platform) would be:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://interop.gsmainclusivetechlab.io/testing/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/simulator/</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="todo"></a>TODO:<a aria-hidden="true" tabindex="-1" class="hash-link" href="#todo" title="Direct link to heading">#</a></h2><ul><li>test triggers</li><li>configuring env for simulators</li><li>configuring callbacks for mojaloop</li></ul><p>1.3.4) Mojaloop specifics Mojaloop should also send messages to Test Control,
instead of sending them to simulators/SUTs. This is being managed via FSP
callbacks inside Mojaloop. More about the initial callbacks setup you can find
here. There are 2 FSPs (for MMO1 and MMO2) that need to be setup per environment
(e.g. Production or Staging).</p><p>The URL structure for callbacks is a very similar to simulators’ one:</p><p>http://{itp_url}/testing/{mojaloop_uuid}/{recipient_uuid}/simulator/{path},
where</p><p>{itp_url} is a URL of ITP,<br>
e.g. <a href="http://interop.gsmainclusivetechlab.io">http://interop.gsmainclusivetechlab.io</a> testing is an identification for
Test Control that this URL is related to Test Cases flow {mojaloop_uuid} is uuid
of this simulator e.g. b2a85076-b748-4d93-8df1-2b39844e6d4b {recipient_uuid} is
a uuid of simulator that I send a message to e.g. for MMO1
e5f5e817-94d6-4a43-a7ec-f7274b6d85c2 simulator is an identification for Test
Control that this URL is related Simulator, so it includes a traceparent and its
messages can be overridden {path} the pass that is necessary to execute exact
callback</p><p>Below you can find some examples of callbacks in Mojaloop that were set for
MMO1:</p><p>FSPIOP_CALLBACK_URL_TRX_REQ_SERVICE
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator</a></p><p>FSPIOP_CALLBACK_URL_QUOTES
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator</a></p><p>FSPIOP_CALLBACK_URL_TRANSFER_POST
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers</a></p><p>FSPIOP_CALLBACK_URL_TRANSFER_PUT
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/%7B%7BtransferId%7D%7D">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/{{transferId}}</a></p><p>FSPIOP_CALLBACK_URL_TRANSFER_ERROR
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/%7B%7BtransferId%7D%7D/error">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/transfers/{{transferId}}/error</a></p><p>FSPIOP_CALLBACK_URL_AUTHORIZATIONS
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator</a></p><p>FSPIOP_CALLBACK_URL_PARTICIPANT_PUT
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/%7B%7BpartyIdType%7D%7D/%7B%7BpartyIdentifier%7D%7D">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/{{partyIdType}}/{{partyIdentifier}}</a></p><p>FSPIOP_CALLBACK_URL_PARTICIPANT_PUT_ERROR
<a href="http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/%7B%7BpartyIdType%7D%7D/%7B%7BpartyIdentifier%7D%7D/error">http://interop.gsmainclusivetechlab.io/testing/b2a85076-b748-4d93-8df1-2b39844e6d4b/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/simulator/participants/{{partyIdType}}/{{partyIdentifier}}/error</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gsmainclusivetechlab/interop-docs/docs/howtestswork.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« ITP Architecture</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/installitp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Interoperability Test Platform Installation Guide »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#components" class="table-of-contents__link">Components</a></li><li><a href="#connections-between-components" class="table-of-contents__link">Connections between Components</a></li><li><a href="#component-urls" class="table-of-contents__link">Component URLs</a><ul><li><a href="#sut-urls" class="table-of-contents__link">SUT URLs</a></li><li><a href="#todo-do-we-need-the-simulator-url-documentation-here" class="table-of-contents__link">TODO: Do we need the simulator URL documentation here?</a></li></ul></li><li><a href="#test-step-matching" class="table-of-contents__link">Test Step Matching</a><ul><li><a href="#simulator-urls" class="table-of-contents__link">Simulator URLs</a></li></ul></li><li><a href="#todo" class="table-of-contents__link">TODO:</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 GSMA . All rights reserved.</div></div></div></footer></div>
<script src="/styles.db19ad20.js"></script>
<script src="/runtime~main.5724f3fa.js"></script>
<script src="/main.78b6a11b.js"></script>
<script src="/1.7c136304.js"></script>
<script src="/2.f8636d77.js"></script>
<script src="/3.fd943062.js"></script>
<script src="/1be78505.6a073ac0.js"></script>
<script src="/ec1ed54d.c005814b.js"></script>
<script src="/51.3ff74967.js"></script>
<script src="/74f83e88.81c9408f.js"></script>
</body>
</html>