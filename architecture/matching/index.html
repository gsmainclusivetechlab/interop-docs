<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">Test Case Matching | GSMA Interoperability Test Platform Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Test Case Matching | GSMA Interoperability Test Platform Documentation"><meta data-react-helmet="true" name="description" content="A single testing session will contain tests for multiple use cases, each of"><meta data-react-helmet="true" property="og:description" content="A single testing session will contain tests for multiple use cases, each of"><meta data-react-helmet="true" property="og:url" content="https://docs.interop.gsmainclusivetechlab.io/architecture/matching"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.interop.gsmainclusivetechlab.io/architecture/matching"><link rel="stylesheet" href="/styles.0fa015b9.css">
<link rel="preload" href="/styles.77549bde.js" as="script">
<link rel="preload" href="/runtime~main.c320bb82.js" as="script">
<link rel="preload" href="/main.7f7367ee.js" as="script">
<link rel="preload" href="/2.da3981eb.js" as="script">
<link rel="preload" href="/3.36932d23.js" as="script">
<link rel="preload" href="/26.91f8c267.js" as="script">
<link rel="preload" href="/935f2afb.c6a18484.js" as="script">
<link rel="preload" href="/17896441.74cf769e.js" as="script">
<link rel="preload" href="/4af976a6.71c172f2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docsguide">Documentation Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture/connections">Component Connections</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/architecture/matching">Test Case Matching</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation">Installation Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/uclist">List of Use Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/tclist">List of Test Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/creating-tc">Creating a Test Case</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/proposing-uc">Proposing a Use Case</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Manual</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/quickguide">Quick Guide for Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/session">Test Sessions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/manual/results">Test Results</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributor&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/contributing">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/tools">Development Tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/new-code">Writing New Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/bugs">Reporting bugs</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Test Case Matching</h1></header><div class="markdown"><p>A single testing session will contain tests for multiple use cases, each of
which may contain multiple test cases. This is useful for rapid testing under a
variety of conditions, but means the platform must automatically identify which
test case is being executed when a request arrives at the platform. For example,
a session may contain two flows which differ only in whether a quote is accepted
or rejected by a remote DFSP. In this case, the test platform must identify
which flow is being executed, in order validate the requests and instruct the
remote DFSP simulator to accept or reject the quote.</p><p>For every test case within the session, the first unmatched step is selected to
compare against the incoming request. For test cases which have not yet been
started, the very first step of the test case is selected. First, the request&#x27;s
basic characteristics are considered to determine which of the test steps may
match. These characteristics are:</p><ul><li>The request <strong>method</strong> (<code>GET</code>, <code>POST</code>, <code>PUT</code>, etc)</li><li>The request <strong>path</strong> (<code>/transactions</code>, <code>quotes/{ID}</code>)</li><li>The request <strong>source and destination components</strong> (<code>Mojaloop Hub</code>,
<code>Service Provider</code>, <code>DFSP1</code>, etc)</li></ul><p>It is frequently the case that multiple test steps will still be possible
matches at this stage, since many test cases test fairly similar flows. In the
example given above for example, these characteristics would be identical for
both the accepted and rejected cases, since both follow the same basic flow of
requests. To disambiguate between them, a further check is required, known as
test <em>triggers</em>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="test-triggers"></a>Test Triggers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#test-triggers" title="Direct link to heading">#</a></h2><p>A test trigger takes the form of a JSON object which must be present within the
body of a request for it to match against the test step. For example, a test
step might be defined with a trigger of:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;amount&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20.03</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>If a request arrives at the platform with a body containing the following, the
test case would be considered a match:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payerid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MSISDN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;123456789&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;amount&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20.03</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;currency&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;EUR&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>However, a request with this body would not be considered a match:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;payerid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MSISDN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;123456789&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;amount&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20.04</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;currency&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;EUR&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>In this way, multiple test cases can be defined unambiguously while sharing
almost identical flows. Returning to the example above, the accepted case may be
defined with a trigger of <code>{&quot;amount&quot;: 20.03}</code> while the rejected case is defined
with a trigger of <code>{&quot;amount&quot;: 20.04}</code>. The two test cases can then be executed
in any order (or even simultaneously) with no conflict between them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="requests-without-a-body"></a>Requests without a body<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requests-without-a-body" title="Direct link to heading">#</a></h2><p>Some requests (such as <code>GET</code> requests) do not have a payload body with which a
trigger could be set up. In this case, it may be possible to write a test case
with a trigger embedded within the test step path. For example, a request to an
account lookup service might involve a request of the form
<code>GET /parties/{TYPE}/{ID}</code>. Two test cases could be defined which differ in the
participant ID used. Since the paths are tested using a regular expression
pattern, these might be defined as such:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Test case 1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">test_steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;^parties/[^/]+/7777777771$&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Test case 2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">test_steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;^parties/[^/]+/7777777772$&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="identical-requests"></a>Identical Requests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#identical-requests" title="Direct link to heading">#</a></h2><p>In the case that neither the request body nor the request path contain any data
which may be used as a trigger, it is not currently possible to disambiguate any
further. As a result, it is not possible to execute multiple test cases
simultaneously, since the platform will not be able to determine which test case
is under execution.</p><p>To allow testing such similar scenarios, ITP defines an option
<code>FORCE_SEQUENTIAL_TESTS</code> which is false by default. When the option is enabled,
test executions are expected to be sequential - so a single session should never
have two parallel test runs. By making this assumption, it becomes possible to
unambiguously select one of several identical test cases by simply clicking the
&quot;Run Test Case&quot; button for the desired test case. This will initiate the test
case execution, and any requests received by the platform will be automatically
matched to the current test case until the test run is complete.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gsmainclusivetechlab/interop-docs/blob/develop/docs/architecture/matching.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture/connections"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Connections between Components</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation Guide Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#test-triggers" class="table-of-contents__link">Test Triggers</a></li><li><a href="#requests-without-a-body" class="table-of-contents__link">Requests without a body</a></li><li><a href="#identical-requests" class="table-of-contents__link">Identical Requests</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 GSMA . All rights reserved.</div></div></div></footer></div>
<script src="/styles.77549bde.js"></script>
<script src="/runtime~main.c320bb82.js"></script>
<script src="/main.7f7367ee.js"></script>
<script src="/2.da3981eb.js"></script>
<script src="/3.36932d23.js"></script>
<script src="/26.91f8c267.js"></script>
<script src="/935f2afb.c6a18484.js"></script>
<script src="/17896441.74cf769e.js"></script>
<script src="/4af976a6.71c172f2.js"></script>
</body>
</html>