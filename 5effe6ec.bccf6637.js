(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{150:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var o=n(2),a=n(9),s=(n(0),n(185)),i=n(241),r={id:"howconnectionswork",title:"How Components Connections Works",sidebar_label:"Component Connections"},l={id:"howconnectionswork",title:"How Components Connections Works",description:"This page describes how the various components of the Interoperability Testing",source:"@site/docs/howconnectionswork.mdx",permalink:"/howconnectionswork",editUrl:"https://github.com/gsmainclusivetechlab/docs/howconnectionswork.mdx",sidebar_label:"Component Connections",sidebar:"someSidebar",previous:{title:"Overview",permalink:"/architecture_overview"},next:{title:"Test Case Matching",permalink:"/testcasematching"}},c=[{value:"Connections between Components",id:"connections-between-components",children:[]},{value:"Component URLs",id:"component-urls",children:[{value:"SUT URLs",id:"sut-urls",children:[]},{value:"TODO: Do we need the simulator URL documentation here?",id:"todo-do-we-need-the-simulator-url-documentation-here",children:[]},{value:"Simulator URLs",id:"simulator-urls",children:[]}]}],b={rightToc:c};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(o.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"This page describes how the various components of the Interoperability Testing\nPlatform (ITP) work together, and how they can be deployed to different\nenvironments."),Object(s.b)("h2",{id:"connections-between-components"},"Connections between Components"),Object(s.b)("p",null,"In normal operation, the payer's MMO would connect directly to Mojaloop to\narrange a funds transfer to the payee's MMO. In testing, however, we must\ninspect every message to validate that they are correctly formed. To achieve\nthis, the ITP acts as a transparent proxy between all components. By configuring\nendpoint URLs within component A to point at the ITP instead of directly to\ncomponent B, the ITP can store all messages and forward them onto component B."),Object(s.b)(i.a,{options:{height:"auto"},dot:'\n    digraph {\n      rankdir="TD"\n      ratio="fill";\n      size="6,2";\n      sp [ label="SP" shape="box"]\n      mmo1 [ label="MMO1" shape="box"]\n      mojaloop [ label="Mojaloop" shape="box"]\n      mmo2 [ label="MMO2" shape="box"]\n      ITP [ label="Test Platform" shape="box"]\n      subgraph sim {\n        rank="same"\n        sp -> mmo1 -> sp [ style="dashed", color="#67ab9f"]\n        mmo1 -> mojaloop -> mmo2 -> mojaloop -> mmo1 [ style="dashed", nodesep=1]\n      }\n      ITP -> {sp mmo1} [dir="both", color="#67ab9f"]\n      ITP -> {mmo1 mojaloop mmo2} [dir="both"]\n    }\n',mdxType:"Graphviz"}),Object(s.b)(i.a,{options:{height:"auto"},dot:'\n      digraph {\n        size="6,2";\n        rankdir="LR"\n        a [style=invis];\n        b [style=invis] ;\n        c [style=invis] ;\n        d [style=invis] ;\n        e [style=invis] ;\n        f [style=invis] ;\n        a -> b [label="Actual message (MM API)", color="#67ab9f"] ;\n        b -> f [label="Actual message (Mojaloop API)"] ;\n        c -> d [label="Logical message (MM API)", style=dashed, color="#67ab9f"];\n        d -> e [label="Logical message (Mojaloop API)", style=dashed] ;\n      }\n',mdxType:"Graphviz"}),Object(s.b)("h2",{id:"component-urls"},"Component URLs"),Object(s.b)("p",null,"In order to recognise the sender and intended recipient of each message received\nby the test platform, this information must be embedded within the message.\nSpecifically, the test platform expects that the base URL for each request will\ncontain a UUID corresponding to both the sender and intended recipients of the\nmessage. Normally, the test platform will insert these UUIDs transparently so\nthat it is not necessary to know which component corresponds to which UUID, but\nit can be helpful for debugging to know which UUID is which:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"SP"),": 114511be-74e9-49d5-b93e-b4a461e01626"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"MMO1"),": e5f5e817-94d6-4a43-a7ec-f7274b6d85c2"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"Mojaloop"),": b2a85076-b748-4d93-8df1-2b39844e6d4b"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"MMO2"),": e602a859-a25f-4d37-9abe-0ac09fb734af")),Object(s.b)("h3",{id:"sut-urls"},"SUT URLs"),Object(s.b)("p",null,"Within a SUT, the base URL of each component should be configured according to\nthe following scheme:"),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{}),"https://{itp_url}/testing/{session_uuid}/{my_uuid}/{recipient_uuid}/sut/\n")),Object(s.b)("p",null,"The ",Object(s.b)("inlineCode",{parentName:"p"},"session_uuid")," corresponds to a unique ID for each testing session, and\nhelps the test platform to validate incoming messages to ensure that the\nexpected test-cases are being correctly matched. ",Object(s.b)("inlineCode",{parentName:"p"},"itp_url")," is the base URL of\nthe test platform (e.g. ",Object(s.b)("inlineCode",{parentName:"p"},"interop.gsmainclusivetechlab.io"),"). ",Object(s.b)("inlineCode",{parentName:"p"},"my_uuid")," is the\nUUID of the component which is being tested, and ",Object(s.b)("inlineCode",{parentName:"p"},"recipient_uuid")," is the UUID of\nthe component to which the request will be made."),Object(s.b)("p",null,"Thus, the URL that an MMO1 test subject should use to send messages to Mojaloop\n(through the test platform) would be:"),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{}),"https://interop.gsmainclusivetechlab.io/testing/41a2e8d5-3ce4-459b-a6eb-1a1e2988c357/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/sut/\n")),Object(s.b)("h3",{id:"todo-do-we-need-the-simulator-url-documentation-here"},"TODO: Do we need the simulator URL documentation here?"),Object(s.b)("p",null,"It feels like it's not useful for a normal user who wouldn't be configuring the\nsimulators anyway. It might be useful in a separate \"deployment\" guide."),Object(s.b)("h3",{id:"simulator-urls"},"Simulator URLs"),Object(s.b)("p",null,"Since the simulators are within the control of the test platform, we can\nslightly simplify the request URLs compared to SUTs. In particular, the\nsimulators use a ",Object(s.b)("inlineCode",{parentName:"p"},"traceparent")," header in place of the ",Object(s.b)("inlineCode",{parentName:"p"},"session_uuid")," from above.\nFor this reason base URLs used by each simulator have this structure."),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{}),"https://{itp_url}/testing/{my_uuid}/{recipient_uuid}/simulator/\n")),Object(s.b)("p",null,"Thus, the URL that an MMO1 simulator should use to send messages to Mojaloop\n(through the test platform) would be:"),Object(s.b)("pre",null,Object(s.b)("code",Object(o.a)({parentName:"pre"},{}),"https://interop.gsmainclusivetechlab.io/testing/e5f5e817-94d6-4a43-a7ec-f7274b6d85c2/b2a85076-b748-4d93-8df1-2b39844e6d4b/simulator/\n")))}p.isMDXComponent=!0},229:function(e,t){},230:function(e,t){},249:function(e,t){}}]);