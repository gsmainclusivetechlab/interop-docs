---
id: architecture_overview
title: Overview
sidebar_label: Overview
---

This section describes the high-level architecture of the Interoperability Test Platform.
The platform was designed to be possible scale and integrate with other simulators in the future, for that reason we have 3 main components:
  - Test Platform
  - Simulators
  - System Under Tests(SUTs)

The system can handle 2 System Under Test, Service Providers and Financial Service Providers.

![High Level Architecture](/img/architecture_high_level.png)

## Test Platform

It's the core of the system which is subdivided into 4 main blocks: Frontend, Backend, Test Management and Proxy. Within this, the test platform can provide a UI, manage users, manage sessions, manage test cases, intercepts messages between simulators and SUTs and test each message that is sent or received by the platform.
The platform uses [Laravel](https://laravel.com/), a web application framework which uses PHP as base language.

### Frontend

The frontend responsible for rendering the UI and uses 2 main technologies: [Vue.js](https://vuejs.org/) and [Tabler](https://tabler.io/).

*   Vue.js: is used to build a single page application.
*   Tabler: provide the admin and dashboard layout to build the UI, underneath uses [Bootstrap](https://getbootstrap.com/) one the most popular frontend frameworks.

### Backend

The backend is responsible for providing the data to UI and interact with the database, and uses 1 main technology: [Inertia.js](https://inertiajs.com/).

*   Inertia.js: Allows to create a single page application without the need to build an API.

### Test Management

It's the core part of the testing which holds the test case, test run and test validators, and uses 1 main technology: [OpenAPI PSR-7 Message Validator](https://github.com/thephpleague/openapi-psr7-validator), besides the testing logic create for this.
The test management supports 2 types of validation Schema validation and Business rule validations, more details [here]().

*   OpenAPI PSR-7 Message Validator: Combine the power of OpenAPI Spec and PS7-Message, and validates all messages(request/response) in the platform.

### Proxy

One of the objectives of the platform is to provide an end-to-end test, which means the platform should be able to follow all messages exchanged by all different entities.
The proxy layer was created with this purpose.
All messages pass to the proxy layer where the platform is able to get the message, store, validate and send to the correct simulator to process the response and the possible next message if needed.

In the diagram below, you can understand how any simulator and proxy are being connected, see more details [here](/howconnectionswork).

import { Graphviz } from "graphviz-react";

<Graphviz
  options={{ width: "100%", height: "auto" }}
  dot={`
    digraph {
      node [ fontname="var(--ifm-font-family)", shape="box", margin=0.3];
      edge [ fontname="var(--ifm-font-family)"];
      rankdir="TD"
      ratio="fill";
      size="3,1";
      simulator1 [ label="Simulator 1" shape="box"]
      simulator2 [ label="Simulator 2" shape="box"]
      simulator3 [ label="Simulator 3" shape="box"]
      simulatorN [ label="Simulator N" shape="box"]
      ITP [ label="Test Platform" shape="box"]
      subgraph sim {
        rank="same"
        simulator1 -> simulator2 -> simulator3 -> simulatorN -> simulator3 -> simulator2 -> simulator1[ style="dashed", nodesep=1]
      }
      ITP -> {simulator1 simulator2 simulator3 simulatorN} [dir="both"]
      subgraph cluster_key {
        size="6,1";
        label="Legend";
        box [shape=point style=invis] ;
        node[ shape = plaintext ];
        leg2[ label = "Actual message" ];
        leg4[ label = "Logical message" ];
        node [ shape = point height = 0 width = 0 margin = 0 ];
        leg1 leg3
        { rank = same; leg1 leg2 leg3 leg4 }
        edge[ minlen = 2 ];
        leg1 -> leg2[ penwidth = 4 ];
        leg3 -> leg4[ style = dotted ];
      }
      simulatorN -> box [style=invis] ;
    }
`}
/>

## Simulators

The simulators are an important part of the system and hold specific knowledge of messages and how the flow should happen.
Each simulator represents a real entity from the real scenario, and any of them can be replaced to be the SUT.

### Service Provider Simulator

Acts as a mock service provider (SP) such as a utility company or supermarket checkout to simulate their role in a transaction.<br />
This simulator can receive and send messages through GSMA Mobile Money API and has a connection with Mobile Money Operator 1.

### Mobile Money Operator 1
Acts as a mock financial services provider (FSP) such as a Mobile Money Operator or Bank to simulate their role in a transaction.<br />
This simulator can perform 2 types of actions:
  - Receive messages through GSMA Mobile Money API and map it to Mojaloop API.<br />
  This simulates a scenario when a Mobile Money Operator receives a request from a Service Provider to perform a transaction, acting as Payee. For more details, see the use case [Merchant-Initiate Merchant Payment](/uclist#mimp).
  - Initiate messages direct trough Mojaloop API.<br />
  This simulates a scenario when a FSP start a transaction to a Mojaloop network, acting as Payer. For more details, see the use case [P2P](/uclist#p2p).

### Mobile Money Operator 2
Acts as a mock financial services provider (FSP) such as a Mobile Money Operator or Bank to simulate their role in a transaction.<br />
This simulator can perform 1 action:
  - Receive and send messages through trough Mojaloop API.<br />
  This simulates a scenario when a FSP receives a request to initiate a transaction(transactionRequest) to a Mojaloop network, acting as Payer. For more details, see the use case [Merchant-Initiate Merchant Payment](/uclist#mimp). <br />
  This simulates a scenario when a FSP reply a transaction to a Mojaloop network, acting as Payee. For more details, see the use case [P2P](/uclist#p2p).

### Mojaloop
It's the interoperability hub, which links 2 or more FSPs and enables. This is not simulated by the system and use a vanilla version of [Mojaloop software](https://mojaloop.io/).

## System Under Test

A System Under Test(SUT) is the entity who is being tested. Current the system can handle 2 System Under Test, Service Providers and Financial Service Providers.<br />
Once a SUT is selected in the platform, the simulator who represents the same entity is not used during the test, so we can ensure the SUT is properly tested.
