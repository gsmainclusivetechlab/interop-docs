<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">Secure Connections | GSMA Interoperability Test Platform Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Secure Connections | GSMA Interoperability Test Platform Documentation"><meta data-react-helmet="true" name="description" content="The Interoperability Test Platform provides several ways to ensure that your"><meta data-react-helmet="true" property="og:description" content="The Interoperability Test Platform provides several ways to ensure that your"><meta data-react-helmet="true" property="og:url" content="https://docs.interop.gsmainclusivetechlab.io/manual/security"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.interop.gsmainclusivetechlab.io/manual/security"><link rel="stylesheet" href="/styles.0fa015b9.css">
<link rel="preload" href="/styles.77549bde.js" as="script">
<link rel="preload" href="/runtime~main.85974c9f.js" as="script">
<link rel="preload" href="/main.c1267d3e.js" as="script">
<link rel="preload" href="/2.1894d722.js" as="script">
<link rel="preload" href="/3.997bf5e8.js" as="script">
<link rel="preload" href="/28.58d1e39a.js" as="script">
<link rel="preload" href="/935f2afb.c2759c5e.js" as="script">
<link rel="preload" href="/17896441.afc8b226.js" as="script">
<link rel="preload" href="/811d81a9.d109670f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">ITP - Interoperability Test Platform - Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docsguide">Documentation Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/connections">Component Connections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture/matching">Test Case Matching</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation">Installation Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/uclist">List of Use Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/tclist">List of Test Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/creating-tc">Creating a Test Case</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/testcases/proposing-uc">Proposing a Use Case</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">User Manual</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/manual/quickguide">Quick Guide for Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/manual/session">Test Sessions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/manual/results">Test Results</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/manual/security">Secure Connections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/manual/groups">User Groups</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributor&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/contributing">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/tools">Development Tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/new-code">Writing New Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributors-guide/bugs">Reporting bugs</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Secure Connections</h1></header><div class="markdown"><p>The Interoperability Test Platform provides several ways to ensure that your
test components are behaving in a secure way.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="encrypted-connections-with-mtls"></a>Encrypted Connections with mTLS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#encrypted-connections-with-mtls" title="Direct link to heading">#</a></h2><p>Normally, two components of a system may communicate via mutual TLS (mTLS),
where both the client and the server authenticate themselves using public key
cryptography. Since the test platform is a proxy in between these two
components, we must now consider two connections instead of one:</p><ol><li>The connection between a client and the proxy (acting on behalf of a server)</li><li>The connection between the proxy (acting as a client) and the server</li></ol><p>In many cases where mTLS is used, these two connections may additionally operate
in the reverse direction (i.e. the client may also act as a server, and vice
versa).</p><p>Note that in the code samples below, <code>openssl</code> is used. Similar operations can
be performed with any appropriate tool.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="proxy-â†’-server"></a>Proxy â†’ Server<a aria-hidden="true" tabindex="-1" class="hash-link" href="#proxy-â†’-server" title="Direct link to heading">#</a></h3><p>In this leg, ITP is acting as an application client, and your SUT is the
application server. Although this is the second leg of the connection, it needs
to be configured first, as part of the session creation wizard:</p><p><img alt="Encrypted Server Configuration" src="/assets/images/encrypted-server-d280545d247086b2eb15ff2172513e18.png"></p><p>It is assumed that the application server is already configured with a server
key and server certificate, signed by a private certificate authority (CA). In
the code samples below, <code>ca.crt</code> refers the the public certificate of the
private CA, and <code>ca.key</code> refers to its private key.</p><p>Firstly, the CA certificate (<code>ca.crt</code>) can be uploaded directly. This will be
used by ITP to verify that your server is authenticating itself correctly with a
valid server certificate.</p><p>To authenticate itself to your server, ITP also needs to present a client
certificate signed by your private CA. In order to do this, a certificate
signing request (CSR) can be generated as part of the session creation wizard.
You can download this CSR (<code>client.csr</code>), and generate a client certificate
(<code>client.crt</code>) using the CA credentials:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 -req -days </span><span class="token number" style="color:rgb(247, 140, 108)">365</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -in client.csr -out client.crt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -CA ca.crt -CAkey ca.key -CAcreateserial</span></div></div></div></div></div><p>You can now upload the client certificate to the platform and proceed to the
next step of session creation.</p><p>Instead of uploading these certificates every time a new session is created, it
is also possible to upload the certificates to a <a href="/manual/groups">user group</a>. By
doing this, a dropdown will appear allowing you to select preconfigured
certificates directly.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging"></a>Debugging<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging" title="Direct link to heading">#</a></h4><p>It is possible to bypass this leg of the encrypted connection by disabling the
&quot;use encryption&quot; setting for the component. When you do this, the URLs which are
displayed will change to use the
<a href="/architecture/connections#insecure-urls">&quot;insecure&quot;</a> version of the URL.
However ITP will continue to present a secure mTLS server, so it will be
possible for the Client â†’ Proxy leg to continue to use the original secure url.
A test failure will be logged on the test results, to indicate that an insecure
connection was used when a secure one was expected.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="client-â†’-proxy"></a>Client â†’ Proxy<a aria-hidden="true" tabindex="-1" class="hash-link" href="#client-â†’-proxy" title="Direct link to heading">#</a></h3><p>In this direction, ITP is acting as an application server. ITP will present a
server certificate (signed by its own private certificate authority), and will
require that the client presents a client certificate signed by the same private
certificate authority (CA). To establish an encrypted connection, therefore, you
must obtain a signed client certificate when you create a session.</p><p>To do this, the client must first have a private key. If you do not already have
a private key, one can be generated with:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa -out client.key </span><span class="token number" style="color:rgb(247, 140, 108)">2048</span></div></div></div></div></div><p>Once you have a private key, you will need to generate a CSR (<code>client.csr</code>).
This contains the information required for ITP to generate a signed certificate:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req -new -key client.key -out client.csr</span></div></div></div></div></div><p>Within the test session, you can click the &quot;Download Certificates&quot; button to
obtain this signed certificate. After uploading <code>client.csr</code> in the window that
appears, you will be able to download a zip file containing two certificates.</p><p><img alt="Test Session URL Configuration" src="/assets/images/encrypted-client-4151041d538535257d77fecde5061ae8.png"></p><p>One certificate will be called <code>client.crt</code>, which is the certificate your
client should present when sending a request. The other certificate is called
<code>RootCA.crt</code>, and your client should use this certificate as a CA certificate to
validate the authenticity of ITP&#x27;s server certificate.</p><p>These two certificates will remain constant across all sessions (as long as your
client key does not change), so you should not need to reconfigure these
certificates at any stage.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debugging-1"></a>Debugging<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-1" title="Direct link to heading">#</a></h4><p>It is possible to bypass the encrypted connection for this step by using the
&quot;insecure&quot; version of the <a href="/architecture/connections#insecure-urls">URL</a>. When
you use the insecure version of the URL, no mTLS checking is performed and a
direct HTTP connection can be used. ITP will continue to use an mTLS connection
when for the Proxy â†’ Server leg, so the server will not need to be reconfigured.
A test failure will be logged on the test results, to indicate that an insecure
connection was used when a secure one was expected.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="json-web-signatures-jws"></a>JSON Web Signatures (JWS)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#json-web-signatures-jws" title="Direct link to heading">#</a></h2><p>Test cases can be defined with configuration to support
<a href="/testcases/creating-tc#jws-signatures">JWS signatures</a>. This configuration
reads values from a session&#x27;s
<a href="/manual/session#step-3-configure-components">environment</a>. As a result, selecting a
test case with a JWS configuration will add entries to a session&#x27;s file
environments:</p><p><img alt="JWS File Environments" src="/assets/images/jws-environments-d7276a90a9d07624bdc283987017122b.png"></p><p>Although the names of these variables may differ, there will generally always be
two variables for each component which uses JWS signatures - a private key and a
public key. As with all environment variables, it is possible to provide these
through a <a href="/manual/groups">user group</a> environment instead of entering them separately
for each new test session.</p><p>The public key should always be provided. ITP will use this to validate the JWS
signature of the request when it is made. If the signature is malformed, a test
failure will be logged.</p><p>The private key only needs to be provided if the component is being simulated by
ITP. In this case, ITP needs to generate the signature itself, and it will use
the given private key to do so. It is important that the private key matches the
public key, otherwise the signature will be malformed when it is validated.</p><p>If you need to generate a new public/private key pair, you can do so using
<code>openssl</code> or many other tools:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa -out private.key </span><span class="token number" style="color:rgb(247, 140, 108)">2048</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl rsa -in private.key -out public.key -pubout -outform PEM</span></div></div></div></div></div><p>If you already have a pair of keys, and you wish to verify that they correspond
to one another, you can also do this with <code>openssl</code>. The output of the following
two commands will be identical if the keys are a matching pair.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl rsa -in private.key -noout -modulus </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> openssl md5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl rsa -pubin -in public.key -noout -modulus </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> openssl md5</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gsmainclusivetechlab/interop-docs/blob/develop/docs/manual/security.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/manual/results"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Test Results</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/manual/groups"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">User Groups Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#encrypted-connections-with-mtls" class="table-of-contents__link">Encrypted Connections with mTLS</a><ul><li><a href="#proxy-â†’-server" class="table-of-contents__link">Proxy â†’ Server</a></li><li><a href="#client-â†’-proxy" class="table-of-contents__link">Client â†’ Proxy</a></li></ul></li><li><a href="#json-web-signatures-jws" class="table-of-contents__link">JSON Web Signatures (JWS)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 GSMA . All rights reserved.</div></div></div></footer></div>
<script src="/styles.77549bde.js"></script>
<script src="/runtime~main.85974c9f.js"></script>
<script src="/main.c1267d3e.js"></script>
<script src="/2.1894d722.js"></script>
<script src="/3.997bf5e8.js"></script>
<script src="/28.58d1e39a.js"></script>
<script src="/935f2afb.c2759c5e.js"></script>
<script src="/17896441.afc8b226.js"></script>
<script src="/811d81a9.d109670f.js"></script>
</body>
</html>