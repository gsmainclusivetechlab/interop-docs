(self.webpackChunkinterop_docs=self.webpackChunkinterop_docs||[]).push([[653],{4841:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var o=n(3366),s=n(5120),a=n(7294),i=["timeout"],r=function(e){var t=e.timeout,n=void 0===t?1e3:t,r=(0,o.Z)(e,i),l=(0,a.useState)(!1),c=l[0],p=l[1];return(0,a.useEffect)((function(){setTimeout((function(){return p(!0)}),n)}),[]),c?a.createElement(s.w,r):a.createElement("p",null,"Loading...")}},6303:function(e,t,n){"use strict";n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return m}});var o=n(7462),s=n(3366),a=(n(7294),n(3905)),i=n(4841),r=["components"],l={title:"Connections between Components",sidebar_label:"Component Connections"},c=void 0,p={unversionedId:"architecture/connections",id:"architecture/connections",title:"Connections between Components",description:"In normal operation, the payer's MMO would connect directly to Mojaloop to",source:"@site/docs/architecture/connections.mdx",sourceDirName:"architecture",slug:"/architecture/connections",permalink:"/architecture/connections",draft:!1,tags:[],version:"current",frontMatter:{title:"Connections between Components",sidebar_label:"Component Connections"},sidebar:"someSidebar",previous:{title:"Overview",permalink:"/architecture/overview"},next:{title:"Test Case Matching",permalink:"/architecture/matching"}},u={},m=[{value:"SUT URLs",id:"sut-urls",level:2},{value:"Insecure URLs",id:"insecure-urls",level:2},{value:"Group URLs",id:"group-urls",level:2},{value:"Implicit SUTs",id:"implicit-suts",level:2}],h={toc:m},d="wrapper";function g(e){var t=e.components,n=(0,s.Z)(e,r);return(0,a.kt)(d,(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In normal operation, the payer's MMO would connect directly to Mojaloop to\narrange a funds transfer to the payee's MMO. In testing, however, we must\ninspect every message to validate that they are correctly formed. To achieve\nthis, the ITP acts as a transparent proxy between all components. By configuring\nendpoint URLs within component A to point at the ITP instead of directly to\ncomponent B, the ITP can store all messages and forward them onto component B."),(0,a.kt)(i.o,{timeout:1e3,options:{height:"auto",width:"100%"},dot:'\n    digraph {\n      rankdir="TD"\n      ratio="fill";\n      size="8,3";\n      node [\n        fontname="var(--ifm-font-family)", shape="box", margin=0.3, penwidth=2\n      ];\n      edge [fontname="var(--ifm-font-family)", penwidth=2];\n      sp [label="SP"]\n      mmo1 [label="MMO1"]\n      mojaloop [label="Mojaloop"]\n      mmo2 [label="MMO2"]\n      ITP [label="Test Platform"]\n      subgraph sim {\n        rank="same"\n        edge[style="dashed", dir="both"]\n        sp -> mmo1 [color="#67ab9f"]\n        mmo1 -> mojaloop -> mmo2 \n      }\n      {\n        edge[dir="both"]\n        ITP -> {sp mmo1} [color="#67ab9f"]\n        ITP -> {mmo1 mojaloop mmo2}\n        ITP -> mojaloop[style="invis"]\n      }\n      subgraph leg {\n        node [width=0.5, height=0.3, label="", style="invis"]\n        {\n          rank="same"\n          a -> b [label="Actual message\n(MM API)", color="#67ab9f"] ;\n          b -> c [label="Actual message\n(Mojaloop API)"] ;\n        }\n        {\n          rank="same"\n          d -> e [label="Logical message\n(MM API)", style=dashed, color="#67ab9f"];\n          e -> f [label="Logical message\n(Mojaloop API)", style=dashed] ;\n        }\n        edge[style="invis"]\n        {mmo1 mojaloop} -> b\n        b -> e\n      }\n    }\n',mdxType:"DelayedGraphviz"}),(0,a.kt)("h2",{id:"sut-urls"},"SUT URLs"),(0,a.kt)("p",null,"Within a SUT, the base URL of each component should be configured according to\nthe following scheme:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-handlebars"},"https://{itp_url}/testing/{my_component}/{recipient_component}/{session_uuid}\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"itp_url")," is the base URL of the test platform (e.g.\n",(0,a.kt)("inlineCode",{parentName:"p"},"interop.gsmainclusivetechlab.io"),"). The ",(0,a.kt)("inlineCode",{parentName:"p"},"session_uuid")," corresponds to a unique\nID for each testing session, and helps the test platform to validate incoming\nmessages to ensure that the correct test case is being executed. ",(0,a.kt)("inlineCode",{parentName:"p"},"my_component"),"\nis the id of the component which is being tested, and ",(0,a.kt)("inlineCode",{parentName:"p"},"recipient_component")," is\nthe id of the component to which the request will be made."),(0,a.kt)("p",null,"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through the test platform) would be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://interop.gsmainclusivetechlab.io/testing/mmo-1/mojaloop/b2a85076-b748-4d93-8df1-2b39844e6d4b/\n")),(0,a.kt)("p",null,"It is not necessary to construct these URLs manually, as they will be displayed\nwithin the test platform once a test session has been created."),(0,a.kt)("h2",{id:"insecure-urls"},"Insecure URLs"),(0,a.kt)("p",null,"By default, all connections within ITP are assumed to be encrypted via mTLS. If\nan encrypted connection is not possible, alternative insecure connections are\nalso available. These use the following format:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-handlebars"},"http://{itp_url}/testing-insecure/{my_component}/{recipient_component}/{session_uuid}\n")),(0,a.kt)("p",null,"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through an unencrypted connection with the test platform) would be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"http://interop.gsmainclusivetechlab.io/testing-insecure/mmo-1/mojaloop/b2a85076-b748-4d93-8df1-2b39844e6d4b/\n")),(0,a.kt)("h2",{id:"group-urls"},"Group URLs"),(0,a.kt)("p",null,'Since a session UUID is encoded within the URL, it is necessary to use a new URL\nevery time a new session is created. This can be inconvenient in cases where a\nSUT\'s URL is not easy to regularly reconfigure. In these situations, it is\npossible to use a "Group URL" instead. A group URL is unique for a particular\nuser group, and a group administrator can remap the URL to point to a different\ntest session at any time. Group URLs use the following format:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-handlebars"},"https://{itp_url}/testing-group/{my_component}/{recipient_component}/{group_id}\nhttp://{itp_url}/testing-insecure-group/{my_component}/{recipient_component}/{group_id}\n")),(0,a.kt)("p",null,"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through a group URL belonging to the group with ID 99) would be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://interop.gsmainclusivetechlab.io/testing-group/mmo-1/mojaloop/99\n")),(0,a.kt)("p",null,"This URL will not need reconfiguring inside the SUT when a new session is\ncreated, since the group administrator can select a new default test session for\nthe group at any time."),(0,a.kt)("h2",{id:"implicit-suts"},"Implicit SUTs"),(0,a.kt)("p",null,"Platform administrators may operate a system centrally for multiple users to use\nin their tests. For example, a live Mojaloop switch may be operated by platform\nadministrators, for operators to test their connections."),(0,a.kt)("p",null,'In this case, it can be inconvenient for users to enter the details of the\nshared system themselves - especially regarding encrypted connection details. To\nsolve this problem, the system can be designated as an "Implicit SUT". When the\nsystem is selected for use in a test session, the connection details are\nautomatically configured in the test session.'),(0,a.kt)("p",null,"Since the implicit SUT is expected to be used as part of multiple test\nsessions - even as part of multiple groups - it is impossible to set a static\nURL using any of the schemes above. In this case, a small modification is\nrequired to the system, to ensure that an HTTP ",(0,a.kt)("inlineCode",{parentName:"p"},"traceparent")," header is forwarded\nfor all related requests. In the case of Mojaloop, for example, no changes are\nrequired because all HTTP headers are automatically forwarded to the request\nrecipient."),(0,a.kt)("p",null,"Using this HTTP header, the session and group IDs are no longer required inside\nthe component URL. As such, base URLs used by implicit SUTs have a simpler\nstructure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-handlebars"},"https://{itp_url}/testing/{my_component}/{recipient_component}\nhttp://{itp_url}/testing-insecure/{my_component}/{recipient_component}\n")),(0,a.kt)("p",null,"Thus, the URL that a Mojaloop system configured as an Implicit SUT should use to\nsend messages to MMO 1 (through the test platform) would be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://interop.gsmainclusivetechlab.io/testing/mojaloop/mmo-1\n")))}g.isMDXComponent=!0},6825:function(){},5159:function(){},5701:function(){}}]);