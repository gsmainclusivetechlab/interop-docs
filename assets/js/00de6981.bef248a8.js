(self.webpackChunkinterop_docs=self.webpackChunkinterop_docs||[]).push([[653],{3500:function(e,n,t){"use strict";t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return r},default:function(){return p},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return h}});var s=t(5893),o=t(1151),i=t(4841);const a={title:"Connections between Components",sidebar_label:"Component Connections"},r=void 0,c={id:"architecture/connections",title:"Connections between Components",description:"In normal operation, the payer's MMO would connect directly to Mojaloop to",source:"@site/docs/architecture/connections.mdx",sourceDirName:"architecture",slug:"/architecture/connections",permalink:"/architecture/connections",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Connections between Components",sidebar_label:"Component Connections"},sidebar:"someSidebar",previous:{title:"Overview",permalink:"/architecture/overview"},next:{title:"Test Case Matching",permalink:"/architecture/matching"}},l={},h=[{value:"SUT URLs",id:"sut-urls",level:2},{value:"Insecure URLs",id:"insecure-urls",level:2},{value:"Group URLs",id:"group-urls",level:2},{value:"Implicit SUTs",id:"implicit-suts",level:2}];function d(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In normal operation, the payer's MMO would connect directly to Mojaloop to\narrange a funds transfer to the payee's MMO. In testing, however, we must\ninspect every message to validate that they are correctly formed. To achieve\nthis, the ITP acts as a transparent proxy between all components. By configuring\nendpoint URLs within component A to point at the ITP instead of directly to\ncomponent B, the ITP can store all messages and forward them onto component B."}),"\n","\n","\n",(0,s.jsx)(i.o,{timeout:1e3,options:{height:"auto",width:"100%"},dot:'\n    digraph {\n      rankdir="TD"\n      ratio="fill";\n      size="8,3";\n      node [\n        fontname="var(--ifm-font-family)", shape="box", margin=0.3, penwidth=2\n      ];\n      edge [fontname="var(--ifm-font-family)", penwidth=2];\n      sp [label="SP"]\n      mmo1 [label="MMO1"]\n      mojaloop [label="Mojaloop"]\n      mmo2 [label="MMO2"]\n      ITP [label="Test Platform"]\n      subgraph sim {\n        rank="same"\n        edge[style="dashed", dir="both"]\n        sp -> mmo1 [color="#67ab9f"]\n        mmo1 -> mojaloop -> mmo2 \n      }\n      {\n        edge[dir="both"]\n        ITP -> {sp mmo1} [color="#67ab9f"]\n        ITP -> {mmo1 mojaloop mmo2}\n        ITP -> mojaloop[style="invis"]\n      }\n      subgraph leg {\n        node [width=0.5, height=0.3, label="", style="invis"]\n        {\n          rank="same"\n          a -> b [label="Actual message\n(MM API)", color="#67ab9f"] ;\n          b -> c [label="Actual message\n(Mojaloop API)"] ;\n        }\n        {\n          rank="same"\n          d -> e [label="Logical message\n(MM API)", style=dashed, color="#67ab9f"];\n          e -> f [label="Logical message\n(Mojaloop API)", style=dashed] ;\n        }\n        edge[style="invis"]\n        {mmo1 mojaloop} -> b\n        b -> e\n      }\n    }\n'}),"\n",(0,s.jsx)(n.h2,{id:"sut-urls",children:"SUT URLs"}),"\n",(0,s.jsx)(n.p,{children:"Within a SUT, the base URL of each component should be configured according to\nthe following scheme:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-handlebars",children:"https://{itp_url}/testing/{my_component}/{recipient_component}/{session_uuid}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"itp_url"})," is the base URL of the test platform (e.g.\n",(0,s.jsx)(n.code,{children:"interop.gsmainclusivetechlab.io"}),"). The ",(0,s.jsx)(n.code,{children:"session_uuid"})," corresponds to a unique\nID for each testing session, and helps the test platform to validate incoming\nmessages to ensure that the correct test case is being executed. ",(0,s.jsx)(n.code,{children:"my_component"}),"\nis the id of the component which is being tested, and ",(0,s.jsx)(n.code,{children:"recipient_component"})," is\nthe id of the component to which the request will be made."]}),"\n",(0,s.jsx)(n.p,{children:"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through the test platform) would be:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://interop.gsmainclusivetechlab.io/testing/mmo-1/mojaloop/b2a85076-b748-4d93-8df1-2b39844e6d4b/\n"})}),"\n",(0,s.jsx)(n.p,{children:"It is not necessary to construct these URLs manually, as they will be displayed\nwithin the test platform once a test session has been created."}),"\n",(0,s.jsx)(n.h2,{id:"insecure-urls",children:"Insecure URLs"}),"\n",(0,s.jsx)(n.p,{children:"By default, all connections within ITP are assumed to be encrypted via mTLS. If\nan encrypted connection is not possible, alternative insecure connections are\nalso available. These use the following format:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-handlebars",children:"http://{itp_url}/testing-insecure/{my_component}/{recipient_component}/{session_uuid}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through an unencrypted connection with the test platform) would be:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://interop.gsmainclusivetechlab.io/testing-insecure/mmo-1/mojaloop/b2a85076-b748-4d93-8df1-2b39844e6d4b/\n"})}),"\n",(0,s.jsx)(n.h2,{id:"group-urls",children:"Group URLs"}),"\n",(0,s.jsx)(n.p,{children:'Since a session UUID is encoded within the URL, it is necessary to use a new URL\nevery time a new session is created. This can be inconvenient in cases where a\nSUT\'s URL is not easy to regularly reconfigure. In these situations, it is\npossible to use a "Group URL" instead. A group URL is unique for a particular\nuser group, and a group administrator can remap the URL to point to a different\ntest session at any time. Group URLs use the following format:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-handlebars",children:"https://{itp_url}/testing-group/{my_component}/{recipient_component}/{group_id}\nhttp://{itp_url}/testing-insecure-group/{my_component}/{recipient_component}/{group_id}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Thus, the base URL that an MMO1 test subject should use to send messages to\nMojaloop (through a group URL belonging to the group with ID 99) would be:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://interop.gsmainclusivetechlab.io/testing-group/mmo-1/mojaloop/99\n"})}),"\n",(0,s.jsx)(n.p,{children:"This URL will not need reconfiguring inside the SUT when a new session is\ncreated, since the group administrator can select a new default test session for\nthe group at any time."}),"\n",(0,s.jsx)(n.h2,{id:"implicit-suts",children:"Implicit SUTs"}),"\n",(0,s.jsx)(n.p,{children:"Platform administrators may operate a system centrally for multiple users to use\nin their tests. For example, a live Mojaloop switch may be operated by platform\nadministrators, for operators to test their connections."}),"\n",(0,s.jsx)(n.p,{children:'In this case, it can be inconvenient for users to enter the details of the\nshared system themselves - especially regarding encrypted connection details. To\nsolve this problem, the system can be designated as an "Implicit SUT". When the\nsystem is selected for use in a test session, the connection details are\nautomatically configured in the test session.'}),"\n",(0,s.jsxs)(n.p,{children:["Since the implicit SUT is expected to be used as part of multiple test\nsessions - even as part of multiple groups - it is impossible to set a static\nURL using any of the schemes above. In this case, a small modification is\nrequired to the system, to ensure that an HTTP ",(0,s.jsx)(n.code,{children:"traceparent"})," header is forwarded\nfor all related requests. In the case of Mojaloop, for example, no changes are\nrequired because all HTTP headers are automatically forwarded to the request\nrecipient."]}),"\n",(0,s.jsx)(n.p,{children:"Using this HTTP header, the session and group IDs are no longer required inside\nthe component URL. As such, base URLs used by implicit SUTs have a simpler\nstructure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-handlebars",children:"https://{itp_url}/testing/{my_component}/{recipient_component}\nhttp://{itp_url}/testing-insecure/{my_component}/{recipient_component}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Thus, the URL that a Mojaloop system configured as an Implicit SUT should use to\nsend messages to MMO 1 (through the test platform) would be:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://interop.gsmainclusivetechlab.io/testing/mojaloop/mmo-1\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4841:function(e,n,t){"use strict";t.d(n,{o:function(){return c}});var s=t(3366),o=t(5120),i=t(7294),a=t(5893),r=["timeout"],c=function(e){var n=e.timeout,t=void 0===n?1e3:n,c=(0,s.Z)(e,r),l=(0,i.useState)(!1),h=l[0],d=l[1];return(0,i.useEffect)((function(){setTimeout((function(){return d(!0)}),t)}),[]),h?(0,a.jsx)(o.w,Object.assign({},c)):(0,a.jsx)("p",{children:"Loading..."})}},6825:function(){},5159:function(){},5701:function(){}}]);