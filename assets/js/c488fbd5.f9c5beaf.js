"use strict";(self.webpackChunkinterop_docs=self.webpackChunkinterop_docs||[]).push([[395],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=c(n),h=s,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||i;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,o=new Array(i);o[0]=h;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[d]="string"==typeof e?e:s,o[1]=r;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8178:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return r},metadata:function(){return c},toc:function(){return d}});var a=n(7462),s=n(3366),i=(n(7294),n(3905)),o=["components"],r={title:"Creating Test Case",sidebar_label:"Creating Test Case"},l=void 0,c={unversionedId:"testcases/creating-tc",id:"testcases/creating-tc",title:"Creating Test Case",description:"This tutorial shows how to create a Test Case for the Interoperability Test Platform. The premise is to guide the creation of a Test Case considering a Sequence Diagram for a particular Use Case Scenario already defined. You can know more about Use Cases accessing Proposing New Use Case documentation.",source:"@site/docs/testcases/creating-tc.md",sourceDirName:"testcases",slug:"/testcases/creating-tc",permalink:"/testcases/creating-tc",draft:!1,tags:[],version:"current",frontMatter:{title:"Creating Test Case",sidebar_label:"Creating Test Case"},sidebar:"someSidebar",previous:{title:"Test Case Template",permalink:"/testcases/template-tc"},next:{title:"Proposing a Use Case",permalink:"/testcases/proposing-uc"}},p={},d=[{value:"Use Case",id:"use-case",level:2},{value:"Use Case Scenario",id:"use-case-scenario",level:3},{value:"Test Case Sections",id:"test-case-sections",level:3},{value:"Information (Header)",id:"information-header",level:3},{value:"Components",id:"components",level:3},{value:"Test Steps",id:"test-steps",level:3},{value:"Putting all Together",id:"putting-all-together",level:2},{value:"Proposing New Test Cases",id:"proposing-new-test-cases",level:2},{value:"Using the Test Case visual Editor",id:"using-the-test-case-visual-editor",level:2}],u={toc:d},h="wrapper";function m(e){var t=e.components,r=(0,s.Z)(e,o);return(0,i.kt)(h,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This tutorial shows how to create a Test Case for the ",(0,i.kt)("a",{parentName:"p",href:"https://interop.gsmainclusivetechlab.io"},"Interoperability Test Platform"),". The premise is to guide the creation of a Test Case considering a Sequence Diagram for a particular Use Case Scenario already defined. You can know more about Use Cases accessing ",(0,i.kt)("a",{parentName:"p",href:"https://docs.interop.gsmainclusivetechlab.io/testcases/proposing-uc"},"Proposing New Use Case")," documentation."),(0,i.kt)("p",null,"As a Test Case is defined in a YAML file, it is recommended to use a text editor with highlight support for YAML files. You will need an account on the Interoperability Test Platform also."),(0,i.kt)("h2",{id:"use-case"},"Use Case"),(0,i.kt)("p",null,"We are going to use the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mobilemoneyapi.io/1.2/content/disbursements"},"Disbursement Use Case")," and create a new Test Case for the Use Case Scenario where an organisation wants to obtain a disbursement balance from their account in a given Mobile Money Operador (MMO). The definition of the Use Case can be found at the ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mobilemoneyapi.io/content/obtain-disbursement-organisation-balance"},"Developer's Portal")," for Mobile Money API."),(0,i.kt)("h3",{id:"use-case-scenario"},"Use Case Scenario"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Obtain a Disbursement Organisation Balance")),(0,i.kt)("p",null,"This use case returns the balances for a disbursement organisation."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Use Case Scenario",src:n(7503).Z,width:"1484",height:"730"})),(0,i.kt)("p",null,"First we have to capture the information presented in the Sequence Diagram that represents the Use Case Scenario and translate it to the fields of a Test Case. For each information that is discovered, we are presenting the resulting YAML file and all fields necessary for a Test Case."),(0,i.kt)("h3",{id:"test-case-sections"},"Test Case Sections"),(0,i.kt)("p",null,"A Test Case is basically defined in three sections in the YAML file, as described in the documentation ",(0,i.kt)("a",{parentName:"p",href:"https://docs.interop.gsmainclusivetechlab.io/testcases/template-tc"},"Test Case Template"),". This three sections contains fields that has the same hierarchy in the YAML file. "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Information")," - acts as a header that provides information about the Test Case itself, like name, description, etc. It has the following fields: ",(0,i.kt)("inlineCode",{parentName:"li"},"name, slug, use_case, behavior, description, precondition")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Components")," - defines the acting parts, like an organisation, a mobile money operator, a mojaloop hub, into ",(0,i.kt)("inlineCode",{parentName:"li"},"components")," that will interact in the Test Case."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Test Steps")," - holds the definition of each step that needs to be executed by a Test Case on the field ",(0,i.kt)("inlineCode",{parentName:"li"},"test_steps"),". It's related to the API Calls defined by the Mobile Money API.")),(0,i.kt)("p",null,"Now we can see a YAML file of a Test Case like the following stub:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Start Information header\nname: ...\nslug: ...\nuse_case: ...\nbehavior: ...\ndescription: ...\nprecondition: ...\n# End Information Header\n\n# Start Components\ncomponents: ...\n# End Components\n\n# Start Test Steps\ntest_steps: ...\n# End Test Steps\n\n")),(0,i.kt)("p",null,"The next steps are how we should analyse the Use Case, Use Case Scenario and Sequence Diagram to extract the information needed to create a Test Case. For that, we'll use the stub above and fill in the fields and values associated."),(0,i.kt)("h3",{id:"information-header"},"Information (Header)"),(0,i.kt)("p",null,"The values for the fields of the header section can be extracted from the textual definition of the Use Case as ",(0,i.kt)("inlineCode",{parentName:"p"},"use_case")," and Use Case Scenario as ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),". Also we notice that for this scenario, the organisation is expecting to receive a balance so the ",(0,i.kt)("inlineCode",{parentName:"p"},"behavior")," is for a correct execution flow. In other words, we are creating a Test Case with a ",(0,i.kt)("inlineCode",{parentName:"p"},"positive")," behavior. The ",(0,i.kt)("inlineCode",{parentName:"p"},"description")," should present the Test Case in a more detailed way and ",(0,i.kt)("inlineCode",{parentName:"p"},"precondition")," should state any requirements or constrains to run the test case. Translating into the YAML file, we have the following header:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Start Information Header\nname: 'Obtain a Disbursement Organisation Balance - success'\nslug: obtain-disbursement-organisation-balance-success\nuse_case: Disbursement\nbehavior: positive\ndescription: |\n  The Organisation wants to test if it is capable of obtaining the\n  disbursement balance from their account within MMO. In this case,\n  we simulate the scenario when the Organisation would like to obtain\n  the balance of their account. This flow shows the necessary steps for\n  this request simulating a successful response.\nprecondition: |\n  - Service Provider has GSMA Mobile Money API Implemented.\n  - Define the envrionment variables to customise this test case:\n    - `IDENTIFIERTYPE`, default value is `accountid`\n    - `IDENTIFIER`, default value is `2000`\n  - Required Parameters for Execution:\n    `IDENTIFIER` should be a valid value according to `IDENTIFIERTYPE`\n# End Information Header\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"precondition")," field was added because the Mobile Money API specifies the variables ",(0,i.kt)("inlineCode",{parentName:"p"},"identifierType")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"identifier")," in the GET request which may be constrained to a specific value, but this depends entirely on what is being tested. Also mind that this section is a textual description for the reader of the Test Case and does not play any role when the test case is run. For the values of ",(0,i.kt)("inlineCode",{parentName:"p"},"identifierType")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"identifier"),", see the schema definition for the Mobile Money API. ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mobilemoneyapi.io/1.2/oas3/22537#/operations/Accounts/accountsIdentifierTypeIdentifierGET"},"https://developer.mobilemoneyapi.io/1.2/oas3/22537#/operations/Accounts/accountsIdentifierTypeIdentifierGET")),(0,i.kt)("h3",{id:"components"},"Components"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Components")," are a important part of a Test Case because it defines the entities that is going to be tested by the Interoperability Test Platform, like a Mobile Money Operator that provides wallets to its customers or an Organisation that wants to make a salary payment. A component can be entirely simulated by the Interoperability Test Platform or can be a real implementation of the Mobile Money API."),(0,i.kt)("p",null,"The information needed to create the components section can be extracted from the Sequence Diagram and is related to the ",(0,i.kt)("strong",{parentName:"p"},"Parties or Actors")," that are interacting in the Test Case. In our example, we have a ",(0,i.kt)("strong",{parentName:"p"},"Disbursement Organisation")," and a ",(0,i.kt)("strong",{parentName:"p"},"Mobile Money Provider"),". These are the Parties/Actors that are mapped into ",(0,i.kt)("inlineCode",{parentName:"p"},"components")," section of the Test Case. Below you can see how the section is defined:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"components:\n  - name: 'Mobile Money Operator'\n    slug: mmo\n  - name: 'Organisation'\n    slug: org\n")),(0,i.kt)("p",null,"The field ",(0,i.kt)("inlineCode",{parentName:"p"},"slug")," is used internally by the the Interoperability Test Platform to execute the Test Case and ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," is used to show a more user-friendly name in the UI for the Parties/Actors involved in the Test Case."),(0,i.kt)("h3",{id:"test-steps"},"Test Steps"),(0,i.kt)("p",null,"This part of the Test Case gets more technical because it is representing information from the HTTP protocol methods and codes that is used by the Mobile Money API and described in the Sequence Diagram. But understand how to map this information is fundamental since this is going to be how the Test Case will be executed by the Interoperability Test Platform."),(0,i.kt)("p",null,"The Sequence Diagram shows all the HTTP methods, codes and expected requests and responses for the Use Case Scenario. HTTP methods and codes are mapped into ",(0,i.kt)("inlineCode",{parentName:"p"},"test_steps")," section, where each request and response is a step. In our example, only one step will be created, so we can start our next section like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"test_steps:\n  - path: '/accounts/{identifierType}/{identifier}/balance'\n    pattern: '^accounts/$'\n    method: GET\n    source: org\n    target: mmo\n    api_spec: 'MM v1.1.2'\n")),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"test_steps")," has a ",(0,i.kt)("inlineCode",{parentName:"p"},"path")," field which can be mapped directly from the GET method in the Sequence Diagram. The ",(0,i.kt)("inlineCode",{parentName:"p"},"pattern")," will enforce the test matching if there is another Test Case with the same path but different values for the variables. The ",(0,i.kt)("inlineCode",{parentName:"p"},"method")," stores which HTTP method should be used by the test. The Parties/Actors mapped as ",(0,i.kt)("inlineCode",{parentName:"p"},"components")," should be used in ",(0,i.kt)("inlineCode",{parentName:"p"},"source")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"target")," specifing the direction of the test flow. In this case it starts from the Organisation and is directed to the Mobile Money Operator. The last mapping is the ",(0,i.kt)("inlineCode",{parentName:"p"},"api_spec")," field which defines the Mobile Money API spec that is being used to run the Test Case."),(0,i.kt)("p",null,"So far we are only defining the fields and values in the YAML file that we can extract directly from the Use Case, the Use Case Scenario and the Sequence Diagram as well from Mobile Money API spec itself. Now we start to define how the Test Case should run. For this, we have to look into a few more fields inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"test_steps")," section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Scripts"))),(0,i.kt)("p",null,"For each ",(0,i.kt)("inlineCode",{parentName:"p"},"test_steps")," we can have ",(0,i.kt)("inlineCode",{parentName:"p"},"test_request_scripts")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"test_response_scripts")," that ensures the correctness of the requests and responses parameters, applying ",(0,i.kt)("strong",{parentName:"p"},"business rules")," based on fixed values or regex expressions. For more information on test scripts, see ",(0,i.kt)("a",{parentName:"p",href:"https://docs.interop.gsmainclusivetechlab.io/testcases/creating-tc#assertions-test_request_scripts-and-test_response_scripts"},"https://docs.interop.gsmainclusivetechlab.io/testcases/creating-tc#assertions-test_request_scripts-and-test_response_scripts")),(0,i.kt)("p",null,"Below we have the definition for our Test Case:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"test_request_scripts: #...\ntest_response_scripts:\n    - name: 'Balance check was successfully sent'\n    rules:\n      status: 'required|in:200'\n  - name: 'currency is specified correctly'\n      rules:\n      body.currency: 'required|regex:/^[A-Z]{3}/'\n")),(0,i.kt)("p",null,"In our example, we do not have business rules for ",(0,i.kt)("inlineCode",{parentName:"p"},"test_request_scripts")," because the request type is a GET method and no parameter is passed in the body of the HTTP message. But we do have business rules for ",(0,i.kt)("inlineCode",{parentName:"p"},"test_response_scripts")," since we want to check if the response message is the HTTP 200 code and if the currency field in the body is composed by 3 letters represeting a currency."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Requests and Responses"))),(0,i.kt)("p",null,"The last part of the Test Case is the definition of the ",(0,i.kt)("inlineCode",{parentName:"p"},"request")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"response")," messages to be simulated and tested by the Interoperability Test Platform. Below we have the structure for define this components of the Test Case:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'request:\n  method: GET\n  uri: \'/accounts/{{ env.IDENTIFIERTYPE|default("accountid") }}/{{ env.IDENTIFIER|default("2000") }}/balance\'\n  headers:\n    X-Date: \'{{ new_date_iso8601() }}\'\n    content-type: application/json\n    body: empty_body\nresponse:\n  status: 200\n  headers:\n      X-Date: \'{{ new_date_iso8601() }}\'\n      content-type: application/json\n    body:\n      accountStatus: available\n      currentBalance: 0.0\n      availableBalance: 0.0\n      reservedBalance: 0.0\n      unclearedBalance: 0.0\n      currency": "USD"\n')),(0,i.kt)("p",null,"This part is strictly dependent of the Mobile Money API API that is being used. The requests and responses must contain all the field that is mandatory by the API, like X-Date, content-type and fields in the body. For this test case, you can check the mandatory values directly in the Mobile Money API definition here: ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mobilemoneyapi.io/1.2/oas3/22537#/operations/Accounts/accountsIdentifierTypeIdentifierGET"},"https://developer.mobilemoneyapi.io/1.2/oas3/22537#/operations/Accounts/accountsIdentifierTypeIdentifierGET")),(0,i.kt)("p",null,"Also here we can make default values for the Test Case or rely on environment variables making the tests more dynamic. For example, the URI definition can use values from environment variables ",(0,i.kt)("strong",{parentName:"p"},"IDENTIFYERTYPE")," and ",(0,i.kt)("strong",{parentName:"p"},"IDENTIFIER")," if they are provided or just use the default values ",(0,i.kt)("strong",{parentName:"p"},"accountid")," and ",(0,i.kt)("strong",{parentName:"p"},"2000"),"."),(0,i.kt)("h2",{id:"putting-all-together"},"Putting all Together"),(0,i.kt)("p",null,"The final YAML file containing the definition of the Test Case is presented below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: 'Obtain a Disbursement Organisation Balance - success'\nslug: obtain-disbursement-organisation-balance-success\nuse_case: Disbursement\nbehavior: positive\ndescription: |\n  The Organisation wants to test if it is capable of obtaining the disbursement balance from their account within MMO. In this case, we simulate the scenario when the Organisation would like to obtain the balance of their account. This flow shows the necessary steps for this request simulating a successful response.\nprecondition: |\n  - Service Provider has GSMA Mobile Money API Implemented.\n  - Define the envrionment variables to customise this test case:\n    - `IDENTIFIERTYPE`, default value is `accountid`\n    - `IDENTIFIER`, default value is `2000`\n  - Required Parameters for Execution:\n    `IDENTIFIER` should be a valid value according to `IDENTIFIERTYPE`\ncomponents:\n  - name: 'Mobile Money Operator'\n    slug: mmo\n  - name: 'Organisation'\n    slug: org\ntest_steps:\n  - path: '/accounts/{identifierType}/{identifier}/balance'\n    pattern: '^accounts$'\n    method: GET\n    source: org\n    target: mmo\n    api_spec: 'MM v1.1.3'\n    test_response_scripts:\n      - name: 'Balance check was successfully sent'\n        rules:\n          status: 'required|in:200'\n      - name: 'currency is specified correctly'\n        rules:\n          body.currency: 'required|regex:/^[A-Z]{3}/'\n    request:\n      method: GET\n      uri: '/accounts/{{ env.IDENTIFIERTYPE|default(\"accountid\") }}/{{ env.IDENTIFIER|default(\"2000\") }}/balance'\n      headers:\n        X-Date: '{{ new_date_iso8601() }}'\n        content-type: application/json\n      body: empty_body\n    response:\n      status: 200\n      headers:\n        X-Date: '{{ new_date_iso8601() }}'\n        content-type: application/json\n      body:\n        accountStatus: available\n        currentBalance: 0.0\n        availableBalance: 0.0\n        reservedBalance: 0.0\n        unclearedBalance: 0.0\n        currency\": \"USD\"\n")),(0,i.kt)("h2",{id:"proposing-new-test-cases"},"Proposing New Test Cases"),(0,i.kt)("p",null,"Any party interested in using the Interoperability Test Platform can propose new\ntest cases using the template presented here. For this, it is important to\nfollow the creation guide ",(0,i.kt)("a",{parentName:"p",href:"./proposing-uc"},"starting from a use case"),", to\nunderstand its application context, then determine which paths should/need to be\ntested. Then, it is possible to use the template shown below to create the test\ncases for each path. The creation of new test cases is based on the following\nroadmap:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Elaboration and understanding of the scenario you want to test;"),(0,i.kt)("li",{parentName:"ol"},"Creation of a use case that can be implemented by ITP;"),(0,i.kt)("li",{parentName:"ol"},"Description of the use case following the model available\n",(0,i.kt)("a",{parentName:"li",href:"/testcases/proposing-uc"},"here"),";"),(0,i.kt)("li",{parentName:"ol"},"Definition of the paths that should be tested for the use case (happy and\nunhappy flows);"),(0,i.kt)("li",{parentName:"ol"},"Preparation of each test case following the model below.")),(0,i.kt)("h2",{id:"using-the-test-case-visual-editor"},"Using the Test Case visual Editor"),(0,i.kt)("p",null,"Although test cases are often quicker to produce using the YAML syntax, it is\nalso possible for users with the Test Case Creator role to edit test cases\ndirectly through the web interface."))}m.isMDXComponent=!0},7503:function(e,t,n){t.Z=n.p+"assets/images/use-case-scenario-57e86376d9d929648791b393f8d21665.png"}}]);